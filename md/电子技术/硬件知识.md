---

---



# 复习

> 计算机部件

[好：计算机组成结构--中央处理器CPU](https://cloud.tencent.com/developer/article/1732527) 

计算机三大核心部件：中央处理器、内部存储器（Memory），输入/输出（I/O）设备

中央处理器： 控制单元、逻辑运算单元、存储单元（包括内部总线和缓冲器）

控制器功能：`指令控制、操作控制、时间控制`、中断处理、总线管理

> 计算机其他功能： 输入输出采用 中断 和 DMA

为了使CPU减少等待时间，甚至不参与计算机==输入输出==过程（等待时间太久），采取程序`中断`的方式和`DMA`的方式

- 外部设备向CPU提出`中断请求` 或 `DMA请求`：  执行指令过程中，`CPU`按时通过采样相应的引脚来`查询有没有中断请求或DMA请求`
  - 执行指令过程中, 在一个`机器周期`结束时，查询是否有DMA请求，如果有，则CPU脱离总线，由`DMA控制器`==控制==使用==总线==
  - 在一个`指令周期`结束时，查询是否有中断请求，如果有，则进入中断响应机器周期，相当于执行了一条中断响应隐指令。在`中断响应`过程中，==得到中断服务程序的入口地址==，并送程序计数器(PC)中，下个指令周期开始时，取出中断服务程序的第一条指令 执行。
  - DMA传输前，CPU要把总线控制权交给DMA控制器，而在结束DMA传输后，DMA控制器应立即把总线控制权再交回给CPU。一个完整的DMA传输过程必须经过==DMA请求、DMA响应、DMA传输、DMA结束==4个步骤


> 寄存器

运算器中的寄存器: 通用、状态条件、暂存、累加

控制器中的寄存器：`程序计数器PC`（指令计数器）、指令寄存器IR、主存数据寄存器(MDR)，主存地址寄存器(MAR)

- `PC 保存将要执行的下一条指令地址（将被访问的指令地址）`， 指令寄存器 `保存当前正在执行的指令`
- MDR`暂存内存指令或数据` ， MAR `存放将被访问`的存储单元的`地址`(**将被访问的数据地址**)

>## ==指令执行过程==

[计算机执行指令的过程_北大计算机组成](https://www.bilibili.com/video/BV1VE411o7nx?vd_source=7346303e5e18677d7261c2c0c109ecfd&p=5&spm_id_from=333.788.videopod.episodes)	[好：CPU 流水线技术,缓存一致性,缓存命中率及其优化 - 知乎](https://zhuanlan.zhihu.com/p/671718467)	 

**指令周期**、 **cpu（机器）周期**、 节拍脉冲或`T周期(时钟周期)` 

一条指令的执行过程 划分为若干个阶段，每一个阶段完成一项工作。每一项工作称为一个基本操作，完成一个基本操作所需要的时间称为机器周期，所以==一个指令周期由若干个机器周期==组成。 而每个==机器周期又由多个时钟周期==完成

- 指令周期: 一条指令从`取指令到执行完成的时间`间隔
- 机器周期(cpu周期)： 从内存中`读取一个指令字`的最短时间来规定CPU周期（机器周期），也即CPU完成一个基本操作所需的时间。通常一个机器周期包含12个时钟周期;  时钟周期通常定义为机器`主频的倒数`
  - CPU完成**一个基本操作**所需的时间
  - 又称`CPU的工作周期 或 基本周期、总线周期`

- T周期： **若干个微操作** 

> 控制器的功能和工作原理

1. 前置概念： `微命令、微操作`（微命令的操作过程)、`微指令`（微命令的组合）、`微程序`（微指令的有序集合）
   1. 微地址 ：`存放微指令`的控制存储器的单元地址
2. 控制方式
   1. 同步控制方式： 任何一条`指令`或指令中的任一`微操作`均由 `统一基准时标` 的时序信号控制。
3. ==控制单元的设计==
   1. 组合逻辑控制（硬布线逻辑控制）
   2. **微程序控制**： 仿照程序设计的方法编制`每个机器指令`对应的微程序，  所有指令对应的微程序放在`只读存储器`（控制存储器CS）中


> 指令流水、指令执行

指令周期简单分为：IF取指(fetch)、ID指令译码、EX执行 、WB写回

取指、指令译码、执行 、访存、WB写回、更新PC

- 访存： 访存阶段，数据存储器(CPU中)读出或写入一个存储器字。指令和数据存储器访问的是相同的存储器位置，但是用于不同的目的
- 写回：将指令执行的结果写回`通用寄存器组`的过程

1. **IF/ID就是我们常说的前端，负责不停地取指和译指，然后为后端提供译指之后的指令，最核心的优化就是要做好[分支预测](https://zhida.zhihu.com/search?content_id=237400516&content_type=Article&match_order=1&q=分支预测&zhida_source=entity)，终归取指是要比执行速度，只有提前做好预测才能尽量匹配上后端。**
   1. 分支预测是提升CPU流水线效率的关键技术之一，它通过`预测分支指令`的结果来减少流水线中的空闲周期，进而提高处理器的整体性能。
2. **后端核心优化是要做好执行单元的并发，以及乱序执行能力，最终要将乱序执行结果正确组合并输出。** 

> ## ==内存管理==

**分段分页的原因**： [好：虚拟内存 、分段、分页的理解](https://www.cnblogs.com/myseries/p/12487211.html) 

==段映射表==: 简称段表,  分段式存储管理系统中，进程或程序都有一个或多个逻辑段，为使程序或称进程能正常运行，能`从物理内存中找出每个逻辑段所对应的位置`，在系统中为每个进程建立一张段映射表,  段表记录了进程中每一个段在内存中的起始地址(又称为"基址" )、段号和段的长度。

1. CPU首先根据CR3 中的值，找到`页目录所在的物理页`
2. 然后根据页目录索引，==找到相应的页目录项== ,  页目录项中有虚拟地址所对应`页表的物理地址`
3. 有了`页表的物理地址`，根据页表索引，==找到该页表中相应的页表项==(PTE,page table entry),页表项中就有这个虚拟地址所对应`物理页的物理地址`
4. 最后用虚拟地址的最低12位，也就是==页内偏移，加上物理页的物理地址==，就得到了该虚拟地址所对应的物理地址。

# 基础知识

[为什么16进制用4个2进制表示](https://blog.csdn.net/m0_64765209/article/details/135702918)	

因为`2^4=16`,这意味着`4位二进制数`正好可以表示成一位十六进制数

[GB和GIB的区别 - 知乎](https://zhuanlan.zhihu.com/p/525943276)	[GB](https://baike.baidu.com/item/GB/8152733)	[计算器](https://www.baidu.com/s?ie=UTF-8&wd=1GB%E7%AD%89%E4%BA%8E%E5%A4%9A%E5%B0%91b)	

GB是基于10进制的存储单位，而GIB是基于2进制的存储单位。具体来说，1GiB等于1024MiB，1MiB等于1024KiB，1KiB等于1024Byte‌

`bit、 Byte、KB、MB、GB、TB`

## 寻址能力

[寻址能力怎么计算_百度搜索](https://www.baidu.com/s?ie=UTF-8&wd=%E5%AF%BB%E5%9D%80%E8%83%BD%E5%8A%9B%E6%80%8E%E4%B9%88%E8%AE%A1%E7%AE%97)	[好：cpu寻址空间（能力）理解](https://blog.csdn.net/modi000/article/details/104936597)	[好：寻址能力](https://www.ctyun.cn/developer/article/465218318872645)	

[4字节指针的寻址能力怎么计算_百度搜索](https://www.baidu.com/s?ie=utf-8&f=8&rsv_bp=1&tn=baidu&wd=4%E5%AD%97%E8%8A%82%E6%8C%87%E9%92%88%E7%9A%84%E5%AF%BB%E5%9D%80%E8%83%BD%E5%8A%9B%E6%80%8E%E4%B9%88%E8%AE%A1%E7%AE%97&oq=4%25E5%25AD%2597%25E8%258A%2582%25E6%258C%2587%25E9%2592%2588%25E7%259A%2584%25E5%25AF%25BB%25E5%259D%2580%25E8%2583%25BD%25E5%258A%259B&rqlang=cn&rsv_enter=0&rsv_dl=tb&rsv_btype=t&inputT=1891&rsv_sug3=42&rsv_sug1=36&rsv_sug7=100&rsv_sug2=0&rsv_sug4=4378)	

每一个`地址对应内存中的一个字节`, 32位地址总线,cpu的寻址能力是 `2^32B=4GB` 

**寻址能力和地址总线有关**，  16位CPU的地址总线位宽可以是20位，32位CPU的地址总线可以是36位，64位CPU的地址总线位宽可以是40位。目前没有64位地址线的CPU，因为没这么大需求

x86处理器有PAE（Physical Address Extention）功能，使用PAE36技术的32位CPU是36根地址线，使用PAE40技术的Intel x86-64 CPU是40根地址线，使用`PAE52`技术的AMD x86-64 CPU是52根地址线。Intel为服务器生产的x86-64 Xeon系列CPU好像也是52根地址线。

**寻址范围和寻址空间**

内存寻址能力不是数而是指针。内存一般按照字节寻址（也可以字寻址），一般32位总线宽是32位（也有服务器是36位），所以32位系统寻址范围是2的32（地址总线宽）次方字节，计算公式是`【2^32B除以1024^3`(GB转为B)，也就是寻址空间是4GB。（寻址范围无单位，寻址空间有单位）。

​    同理，64位地址总线宽如果是64，2的64次方字节，计算公式是【2的64次方/(1024的3次方)】，即理论上16EB的寻址空间。主要还是受限于主板的支持

**32位操作系统寻址空间是4GB，不是32位CPU寻址空间**

内存访问能力是硬件（CPU寻址能力）和软件（操作系统）。进程访问的都是`逻辑地址`，逻辑地址是操作系统给的。32位操作系统逻辑地址编码地址位是32位，所以说`4GB寻址范围是操作系统`提供的。

用32位操作系统不管用什么CPU只能支持4GB的寻址范围，实际是说操作系统的层面，而不是说32位CPU只能寻址4GB。

# 芯片工作原理

[芯片内部的工作原理](https://www.bilibili.com/video/BV1Ce4y1W71k/?vd_source=7346303e5e18677d7261c2c0c109ecfd)		[游戏背后的逻辑](https://www.bilibili.com/video/BV1JZzCYhEqZ/?t=6&vd_source=7346303e5e18677d7261c2c0c109ecfd) 

[好：晶体管的工作原理](https://www.bilibili.com/video/BV1rj411Z7iT?spm_id_from=333.788.recommend_more_video.1&vd_source=7346303e5e18677d7261c2c0c109ecfd) 	[三极管是如何导电](https://www.bilibili.com/video/BV1kv411574Y/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	

[MOS管的工作原理](https://www.bilibili.com/video/BV1Jc411D7t5/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	 

[单片机工作原理](https://www.bilibili.com/video/BV1CX4y137rg/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	

[电路中VCC VDD VSS VEE GND的含义](https://www.bilibili.com/video/BV1Pc411j7eQ?spm_id_from=333.788.recommend_more_video.18&vd_source=7346303e5e18677d7261c2c0c109ecfd)	

[电路板上原件](https://www.bilibili.com/video/BV1A7421f7SJ?spm_id_from=333.788.recommend_more_video.-1&vd_source=7346303e5e18677d7261c2c0c109ecfd)		

[操作系统底层：函数调用的秘密](https://www.bilibili.com/video/BV1JpcLeTEbR/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	

电子可以在金属原子之间自由移动，并且当连接到电源时，它们被迫移动

N型半导体：5个价电子，有多余电子,负电荷

P型半导体：用3个价电子的杂质进行掺杂，得到总共7个电子的原子，少一个电子，空穴,正电荷

PN结：电荷相反,会在接触处相互吸引，通过应用电压源，得到2种结果	

晶体管：与水龙头类似，管子是集电极，水龙头是基极，控制水流的开关，发射极是出水口

| ![](./硬件知识.assets/Snipaste_2024-12-05_14-40-19-1739630548882-82.jpg) | ![](./硬件知识.assets/Snipaste_2024-12-05_14-40-00-1739630548883-83.jpg) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| ![晶体管优点](./硬件知识.assets/Snipaste_2024-12-05_15-38-40-1739630548883-84.jpg) | ![]()                                                        |

## 逻辑电路

[探索计算机的工作原理 | 从晶体管到ALU简洁直观解释](https://www.bilibili.com/video/BV1hjUmY7EVf/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	 [CPU中的缓存是如何工作的？](https://www.bilibili.com/video/BV1MdzJYyEUF/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	[晶体管是如何运行代码的？](https://www.bilibili.com/video/BV1PvzcYjEAa/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	

​	

# CPU

复习重点： [中央处理器体系结构](https://baike.baidu.com/item/%E4%B8%AD%E5%A4%AE%E5%A4%84%E7%90%86%E5%99%A8%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/21414183?fr=ge_ala) 、控制部件、**预取单元**、寄存器、执行指令过程

[CPU内部的单个比特位如何防止用户程序直接控制硬件资源](https://www.bilibili.com/video/BV1MayKYHEdj/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	[时钟是如何驱动CPU运行的](https://www.bilibili.com/video/BV1PKz8YfETT/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	 

[详细了解中央处理器的工作原理](https://www.bilibili.com/video/BV1mQNHeLEkW/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	

## CPU结构

[好：计算机组成结构--中央处理器CPU](https://cloud.tencent.com/developer/article/1732527)	[解构机器语言与处理器工作原理](https://www.bilibili.com/video/BV1NjrTY6EK2/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	[cpu内部结构_百度搜索](https://www.baidu.com/s?ie=UTF-8&wd=cpu%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84)	

### CPU基本结构

[中央处理器部分_百度百科](https://baike.baidu.com/item/%E4%B8%AD%E5%A4%AE%E5%A4%84%E7%90%86%E5%99%A8%E9%83%A8%E5%88%86/21869720)	[处理器结构_百度百科](https://baike.baidu.com/item/%E5%A4%84%E7%90%86%E5%99%A8%E7%BB%93%E6%9E%84/14724193?fr=aladdin)	[[CPU 内部缓存的工作原理](https://www.bilibili.com/video/BV124qaYNE7i/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	[处理器内部的单个bit如何保护操作系统的完整性](https://www.bilibili.com/video/BV1beBdYrEyN/?vd_source=7346303e5e18677d7261c2c0c109ecfd)  	

[控制存储器容量计算](https://www.bilibili.com/video/BV1xNzRYiEkd/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	

> 要实现一个数字系统需要三个主要的组成部分：
>
> （1）计算对位进行操作的函数的组合逻辑（ALU）；
>
> （2）存储位的存储器元素（寄存器）；
>
> （3）[控制存储器](https://baike.baidu.com/item/控制存储器/3219984?fromModule=lemma_inlink)元素更新的==时钟信号==。

控制单元、逻辑运算单元、存储单元（包括内部总线和缓冲器）三大部分

- ==控制单元==完成数据处理整个过程中的调配工作
- ==逻辑单元==则完成各个指令以便得到程序最终想要的结果
- ==存储单元==就负责存储原始数据以及运算结果

寄存器:  用来保存指令执行过程中临时存放的寄存器操作数和中间（或最终）的操作结果

控制部件: ==[ 指令译码并执行 ]==。 主要**负责对指令译码**，并且发出为`完成每条指令`所要执行的各个操作的`控制信号`。其结构有两种：一种是以微存储为核心的`微程序控制方式`；一种是以`逻辑硬布线结构`为主的控制方式。

> 1. 微存储保存微码，微码对应于一个最基本的微操作，又称微指令
>    1. ==指令由==不同序列的==微码组成==，这种微码序列构成微程序
>    1. 指令执行过程:  给出==数据通路==，写出 取指周期、间址周期、执行周期和中断周期的微操作流程
>    1. **微程序控制器** : 微程序、微指令和微命令（微操作） ，微指令格式，微命令的编码方式，微地址的形成方式。
> 2. **译码后执行微操作**： 中央处理器在对==指令译码以后==，即==发出==一定时序的==控制信号==，按给定序列的顺序==以微周期为节拍==, ==执行==由这些微码确定的若干个==微操作==，`即可完成某条指令的执行`。
> 3. 简单指令是由3～5个微操作组成，复杂指令则要由几十个微操作甚至几百个微操作组成。

### CPU的逻辑单元

[cpu预取单元](https://chat.baidu.com/search?pd=csaitab&setype=csaitab&source=pc_csaitab&extParams=%7B%22enter_type%22%3A%22search_b_tab%22%2C%22sa%22%3A%22vs_tab%22%7D&word=%E6%8E%A7%E5%88%B6%E5%8D%95%E5%85%83%EF%BC%9A%E5%86%B3%E7%AD%96%E4%B8%AD%E5%BF%83&dyTabStr=MCwxMiwzLDEsMiwxMyw3LDYsNSw5)	[英特尔预取技术（Intel Prefetching）](https://zhuanlan.zhihu.com/p/705066975)	

[ARM Cortex-M7处理器体系结构简介 ](https://zhuanlan.zhihu.com/p/266475619) [Cortex-M7 Processor_百度搜索](https://www.baidu.com/s?ie=UTF-8&wd=Cortex-M7%20Processor)	[处理器(Cortex-M7 Processor)](https://blog.csdn.net/qq_42700289/article/details/131681706)		

> 控制单元负责整个CPU的指挥控制，包括==指令的译码和生成控制信号==；
>
> 运算单元负责执行具体的算术和逻辑运算；
>
> 存储单元则用于存放数据和指令。
>
> 预取单元则通过==提前获取这些数据或指令，为运算单元提供所需的数据==，从而加速整个处理过程‌

分为八个逻辑单元   [中央处理器部分_百度百科](https://baike.baidu.com/item/%E4%B8%AD%E5%A4%AE%E5%A4%84%E7%90%86%E5%99%A8%E9%83%A8%E5%88%86/21869720)	[指令译码器_百度百科](https://baike.baidu.com/item/%E6%8C%87%E4%BB%A4%E8%AF%91%E7%A0%81%E5%99%A8/3295261?fromModule=lemma_inlink)	[计算机系统构成及原理 - 知乎](https://zhuanlan.zhihu.com/p/592365255)	 [操作系统之内存管理 ( 虚拟内存，页面置换算法，分段等)](https://baijiahao.baidu.com/s?id=1717508522984565904&wfr=spider&for=pc)	

1. 指令寄存器： 芯片上的==指令仓库==，有了它CPU就不必停下来查找[计算机内存](https://baike.baidu.com/item/计算机内存/9021807?fromModule=lemma_inlink)中的指令，从而大幅提高了CPU的运算速度。
2. **指令译码器** ：将复杂的==机器语言指令==解译成运算逻辑单元==（ALU）和寄存器能够理解的简单格式==
3. **控制单元CU**： 负责处理过程的==操作控制器==。根据来自译码单元的指令，它会==生成控制信号==，告诉运算逻辑单元（ALU）和寄存器如何运算、对什么进行运算以及对结果进行怎样的处理   -> 控制时钟信号
   1. 控制单元（Control Unit）是CPU的指挥控制中心，负责程序的流程管理‌1。
   2. 它由`指令寄存器IR、指令译码器ID和操作控制器OC`三个部件组成，对协调整个电脑有序工作极为重要‌
   3. 取指令，放在指令寄存器IR中，通过指令译码(分析)确定应该进行什么操作，然后通过`操作控制器OC`，按确定的时序，向相应的部件发出微操作控制信号
      1. 操作控制器OC中主要包括节拍脉冲发生器、控制矩阵、[时钟脉冲发生器](https://baike.baidu.com/item/时钟脉冲发生器/22306084?fromModule=lemma_inlink)、复位电路和启停电路等控制逻辑。
4. **寄存器**： ==存放==程序的部分==指令==，它还负责存储==指针跳转信息==以及==循环操作命令==，是运算逻辑单元（ALU）为完成控制单元请求的任务所使用的数据的小型存储区域，其数据来源可以是高速缓存、内存、控制单元中的任何一个。
5. 逻辑运算单元（ALU）
6. **==预取单元==**： PU效能发挥对其依赖非常明显，`预取命中率`的高低直接关系到[CPU核心](https://baike.baidu.com/item/CPU核心/3030437?fromModule=lemma_inlink)利用率的高低，进而带来指令执行速度上的不同。
   1. 核心目的都是为了`提高数据访问的效率`或减少数据访问的延迟,  ‌**CPU中的预取单元是负责提前获取数据或指令以提高处理器性能的组件**
   1. 根据命令或要执行任务所提出的要求，何时时候，预取单元都有可能从指令高速缓存或[计算机内存](https://baike.baidu.com/item/计算机内存/9021807?fromModule=lemma_inlink)中获取数据和指令。当指令到达时，`预取单元最重要的任务就是确保所有指令均排列正确`，然后发送给译码单元。
   1. 提前从内存或外部存储设备中加载数据到缓存中。这样，当处理器实际需要访问这些数据时，就可以直接从缓存中快速获取，而无需等待从内存或外部存储设备中加载数据的时间
7. 总线单元
8. 数据高速缓存

| ![](./硬件知识.assets/Snipaste_2024-12-17_16-38-57-1739630548883-85.jpg) | ![](./硬件知识.assets/ip-1739630548883-86.png)               |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| ![](./硬件知识.assets/r-1739630548884-87.jpg)                | ![](./硬件知识.assets/Snipaste_2025-01-16_00-06-18-1739630548884-88.jpg) |

#### ==控制单元CU==

[好：计算机组成结构--中央处理器CPU](https://cloud.tencent.com/developer/article/1732527)	

**控制器的功能**：

1. 控制器的能自动的==形成指令的地址==，并能发出取指令的命令，将对应此地址的指令取到控制器中，成为`指令控制`
2. 取到指令之后，要==产生完成每条指令的控制命令==。称为`操作控制`
3. 控命令产生后，需要==对各条控制命令加以时间上的控制==，称为`时间控制`
4. 处理异常情况和特殊请求称为`中断处理`
5. 总线管理功能

**计算机其他功能 ：**

- CPU的工作过程就是不停的执行指令，计算机各个部分的所进行的工作可以说都是由CPU根据指令来启动的（指的是进入操作系统之后，纯硬件的话还是有南北桥）。

- 因为CPU的速度太快，为了使CPU减少等待时间，甚至`不参与`计算机`输入输出`过程（等待时间太久），采取程序`中断 和 DMA`的方式
  - 外部设备需要向CPU提出==中断请求或DMA请求==，因此在执行指令过程中，CPU还要按时通过采样相应的引脚来查询有没有中断请求或DMA请求
  - 一般，在一个机器 周期结束时，查询是否有DMA请求，如果有，则CPU脱离总线，由DMA控制器控制使用总线
  - 在一个指令周期结束时，查询是否有中断请求，如果有，则进入中断响应机器周期，相当于执行了一条中断响应隐指令。
  - 在中`断响应`过程中，`得到中断服务程序的入口地址`，并送程序计数器(PC)中，下个指令周期开始时，取出中断服务程序的第一条指令执行
  - 一个完整的DMA传输过程必须经过`DMA请求、DMA响应、DMA传输、DMA结束`4个步骤

#### 预取单元

[ARM Cortex-M7处理器体系结构简介 ](https://www.cnblogs.com/hilnx/p/15117931.html)	[Cortex-M7](https://www.bilibili.com/opus/916719550535303286)	[探索ARM Cortex-M7核心：为明日物联网预做准备](https://www.eeworld.com.cn/mcu/hisic512451.html)	 

[STM32前言知识总结_stm32f7和h7区别](https://blog.csdn.net/qq_28576837/article/details/126129453)	[STMCU中文官网](https://www.stmcu.com.cn/Product/pro_detail/cat_code/STM32H7/family/81/sub_family/236/layout/product) 	[STM32H7系列芯片和STM32F7系列芯片的差异](https://blog.csdn.net/mftang/article/details/137267982)		

预取单元中使用的预取算法有哪些:  [CPU中都有哪些预取的方法和技术](https://www.zhihu.com/question/629921594/answer/3540386155)	[Intel64及IA-32架构优化指南](https://www.cnblogs.com/zenny-chen/archive/2013/03/07/2948511.html)	

> 扮演着加速数据或代码移动的角色。在处理器执行指令的过程中，数据或指令的获取往往是一个耗时的过程，特别是当数据或指令存储在较慢的存储器中时。为了优化这一过程，预取单元会==提前预测处理器即将需要的数据或指令==，并将其从较慢的存储器中预取到较快的缓存中，或者直接预取到处理器内部。

以Cortex-M7处理器为例，它包含了预取单元作为组件模块之一‌

1. 当处理器执行到某个指令时，预取单元会根据当前的指令流和访问模式，预测接下来可能会需要哪些数据或指令。
2. 然后，它会利用处理器的总线接口，如AXI系统总线接口‌, 从存储器中提前获取这些数据或指令，并将它们存储在适当的缓存中，如数据缓存(D-Cache)‌
3. 当处理器实际需要这些数据或指令时，它们已经位于较快的缓存中，或者已经预取到处理器内部，从而大大减少了处理器等待数据的时间，提高了整体性能。
4. 预取单元的工作效率和准确性取决于多种因素，包括处理器的架构、总线接口的速度、存储器的性能以及预取算法的优化等。因此，在设计处理器时，需要综合考虑这些因素，以确保预取单元能够高效地工作，为处理器提供最佳的性能提升。

[预取单元中使用的预取算法有哪些](https://chat.baidu.com/search?pd=csaitab&setype=csaitab&source=pc_csaitab&extParams=%7B%22enter_type%22%3A%22search_b_tab%22%2C%22sa%22%3A%22vs_tab%22%7D&word=%E6%8E%A7%E5%88%B6%E5%8D%95%E5%85%83%EF%BC%9A%E5%86%B3%E7%AD%96%E4%B8%AD%E5%BF%83&dyTabStr=MCwxMiwzLDEsMiwxMyw3LDYsNSw5)	 [CPU中都有哪些预取的方法和技术](https://www.zhihu.com/question/629921594/answer/3540386155)	[Intel64及IA-32架构优化指南](https://www.cnblogs.com/zenny-chen/archive/2013/03/07/2948511.html)	

预取单元中使用的**预取算法**主要包括以下几种：

1. ‌**硬件指令预取器**‌：这是一种硬件实现的预取机制，用于提前获取处理器即将执行的指令，以减少指令获取的时间延迟‌。
2. ‌**硬件缓存行数据或指令预取**‌：也称为硬件缓存行预取，这种算法会预测处理器即将访问的数据或指令，并将其预取到缓存行中，以便处理器能够快速访问‌。
3. ‌**数据缓存单元(DCU)预取器**‌：也称为流式预取器，当检测到对最近加载数据的递增访问时触发。处理器会假设这种访问是流式算法的一部分，并自动获取下一行数据。这种算法特别适用于顺序访问数据的场景‌。
4. ‌**基于指令指针(IP)的步进预取器**‌：此预取器跟踪个别加载指令，如果检测到加载指令具有规则步进（如数组访问），则会向当前地址加上步进值的下一个地址发送预取请求。此预取器可以向前或向后预取，并能检测到高达一定范围内的步进模式‌
5. ‌**软件数据预取**‌：除了硬件预取外，还可以通过软件编程来实现数据预取。软件可以使用特定的预取指令或函数，提前将数据从内存中加载到缓存中，以减少后续访问的时间延迟‌

这些预取算法在CPU的预取单元中发挥着重要作用，通过提前获取处理器即将需要的数据或指令，可以显著提高处理器的性能和效率。

### ==寄存器==

[累加寄存器_百度百科](https://baike.baidu.com/item/%E7%B4%AF%E5%8A%A0%E5%AF%84%E5%AD%98%E5%99%A8/3219636?fr=ge_ala)	[好：计算机组成结构--中央处理器CPU](https://cloud.tencent.com/developer/article/1732527)	[内存的原理](https://www.bilibili.com/video/BV1Htr8YhELV/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	

[计算机如何记忆？ | 探索计算机内存：锁存器、触发器和寄存器](https://www.bilibili.com/video/BV1NKiiYGEvR/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	

> 运算器中的寄存器

- **暂存寄存器：** 用于暂时存放从`主存中读取来的数据`，这个数据不能放在通用寄存器中，否则会破坏其原有的内容。
- **累加寄存器（ACC）** 累加寄存器通常简称累加器，他是一个通用寄存器。功能是：当运算器的ALU单元执行算数或逻辑运算时，为ALU提供一个工作区，累加寄存器 `暂存ALU运算的结果`。 一般通用寄存器的数量在16个以上，因此需要在指令格式中对寄存器号加以编址。
- **通用寄存器** 可以作为某种寻址方式的专用寄存器，主要用于放操作数（源操作数和，目的操作数，以及中间结果）常见的通用寄存器有AX、BX、CX、DX、以及堆栈指针SP（指示栈顶地址）等。
- **状态条件寄存器（PSW）** 状态条件寄存器，也叫程序状态字寄存器，保存由算术指令和逻辑指令运行和测试的结果建立的各种条件码内容，如运算结果进位标志C，运算结果溢出标志V，运算结果为0标志Z，运算结果为负的标志N，这些标志通常分别由一位触发器保存。    [PSW_百度百科](https://baike.baidu.com/item/PSW/1878339?fr=ge_ala)	
  - `Program Status Word`，即[程序状态字](https://baike.baidu.com/item/程序状态字/0?fromModule=lemma_inlink)（也叫程序[状态寄存器](https://baike.baidu.com/item/状态寄存器/0?fromModule=lemma_inlink)），可用于OS在管态（系统态）和目态（用户态）之间的转换

> 控制器中的寄存器

-  **程序计数寄存器（PC）_指令计数器** 为了能够保证程序能够持续不断地执行，CPU必须采取程序计数器这一手段，通常==程序计数器又称为指令计数器==。在程序开始前，必须将它的起始地址，及程序的第一条指令的所在内存单元的地址送入PC。当执行指令时CPU会自动修改PC的内容，以便使其`保存`的总要是`将要执行的下一条指令地址`。但是要注意JUMP类指令取出时，PC仍是先加1，因为此时JUMP指令还未执行，当加1后在执行跳转命令。因此程序计数器是具有寄存信息和计数两种功能。 
   -  `Program Counter Register`

-  **指令寄存器（IR)** ： `Instruction Register`， 指令寄存器用来`保存当前`正在执行的`指令`（内容不可变），当执行一条`指令`时，先把它(指令)`从内存取到数据缓冲寄存器中，然后传至指令寄存器`。==指令划分为操作码和地址码字段==（参见指令系统章节),是以二进制形式存储。 为了执行任何给定的指令，必须==对操作码进行测试==，以便识别所要求的操作。==指令译码器==就是做这项工作的。指令寄存器中==操作码字段的输出就是指令译码器的输入==。操作码一经==译码后，即可向操作控制器发出具体操作的特定信号==。 
   -  [指令译码器](https://baike.baidu.com/item/指令译码器/3295261?fromModule=lemma_inlink) ： 将复杂的`机器语言指令解译`成运算逻辑单元`（ALU）和寄存器`能够理解的简单格式
   -  指令译码器 : 识别 `指令操作码` 所要求的操作
   
-  存储器数据寄存器（`MDR`）:   主存数据寄存器(MDR)，与主存地址寄存器(MAR)帮助完成CPU和主存储器之间的通信，MDR暂存要被写入地址单元或者从地址单元读出的数据。即`暂存从主存读入`一条`指令或数据`，反之，写入前也要有MDR暂存。作用：
  - 作为CPU、内存和外部设备之间信息传送的中转站
  - 补偿作为CPU、内存和外部设备之间在操作速度上的差别
  - 在单累加器结构的运算器中，MDR还可作为操作数寄存器
-  储存器地址寄存器（`MAR`）:  用于存放`将被访问的存储单元的地址`

> 用户是否可见

- 可见

   即程序员可以通过程序去访问的寄存器：    

  - 通用寄存器
  - 数据寄存器
  - 地址寄存器
  - 条件码寄存器 PSW
  - 程序计数器PC

- 不可见

   即CPU内部工作寄存器：    

  - 指令寄存器 IR
  - 储存器地址寄存器MAR
  - 存储器数据寄存器 MDR

### ==控制器功能==和工作原理

#### 前置概念

1、==微命令==
控制部件向执行部件发出的各种控制命令叫作微命令，它是`构成控制序列的最小单位`,  控制计算机各部件完成某个基本微操作的命令

2、**微操作**

- 微命令的操作过程
- 微命令是微操作的控制信号，微操作是微命令的操作过程。

- 微操作是执行部件中最基本的操作

由于数据通路的结构关系，`微操作可分为相容的和互斥`的两种：

- 互斥的微操作，是指不能同时或不能在同一个节拍内并行执行的微操作。`可以编码`
- 相容的微操作，是指能够同时或在同一个节拍内并行执行的微操作。必须各占一位

3、==微指令==
把在`同一CPU周期内并行执行的微操作`控制信息，存储在控制存储器里，称为一条微指令（Microinstruction）

- 它是微命令的组合，微指令存储在控制器中的控制存储器中
- 一条微指令通常至少包含两大部分信息：
  - 操作控制字段，又称`微操作码`字段，用以产生某一步操作所需的各个微操作控制信号。    
    - 某位为1，表明发微指令
    - 微指令发出的控制信号都是节拍电位信号，持续时间为一个CPU周期
    - 微命令信号还要引入时间控制
  - 顺序控制字段，又称`微地址码`字段，用以控制产生`下一条要执行的微指令地址`。

4、==微程序==

- 一系列微指令的有序集合就是微程序。
- `一段微程序对应一条机器指令`

5、**微地址 **
`存放微指令`的控制存储器的单元地址

#### 控制方式

1、同步控制方式
任何一条指令或指令中的任一微操作均由 统一基准时标 的时序信号控制

2、异步控制方式

**用途：** 一般用于`主机与I/O设备间的传送控制`，使高速的主机与慢速的I/O设备可以按照各自的需要的设置时序系统

- 无基准时标信号
- 无固定的周期节拍和严格的时钟同步
- 采用 应答方式

3、联合控制方式: 同步与异步相结合

4、人工控制方式

- Reset
- 连续 和 单条 指令执行转换开关
- 符合停机开关

#### 控制单元的设计

1、组合逻辑控制（硬布线逻辑控制）不是重点

由基本的门电路组合实现。这种方式实现的控制器的处理速度快，但电路庞杂，制造周期长，不灵活，可维护性差。

2、==微程序控制==

- 仿照程序设计的方法`编制每个机器指令对应的微程序`，每个微程序由若干条微指令构成，各微指令包含若干条微命令。所有指令对应的微程序`放在只读存储器CS中`。当执行到某条指令时，取出对应微程序中的各条微指令，译码产生对应的微命令，送到机器相应的地方，控制其动作。
- 这个只读存储器称为==控制存储器(CS)==。 微程序控制方式下，控制单元的设计简单，指令添加容易(灵活)，可维护性好，但速度较慢。

**微指令的编码方式（控制方式）**

- 直接编码（直接控制）方式
- 字段直接编码方式（显式编码）
- 字段间接编码方式(隐式编码)
- 混合编码

**微指令序列地址的形成**

**微指令格式**

1. 水平型微指令:  一次能定义并执行多个并行操作 
   - 直接编码
   - 字段直接编码
   - 字段间接编码
   - 直接和字段混合编码
2.  垂直型微指令 
   - 类似机器指令操作码 的方式
   - 由微操作码字段规定微指令的功能
3. 两种微指令格式的比较(重要哦）
   1. 水平型微指令比垂直型微指令 并行操作能力强 ， 灵活性强
   2. 水平型微指令执行一条机器指令所要的 微指令 数目少，速度快
   3. 水平型微指令 用较短的微程序结构换取较长的 微指令结构
   4. 水平型微指令与机器指令 差别大

### CPU和PU的效能对比‌

[cpu PU效能_百度搜索](https://www.baidu.com/s?ie=utf-8&f=8&rsv_bp=1&tn=baidu&wd=cpu%20PU%E6%95%88%E8%83%BD&oq=cpu%2520PU%25E6%2595%2588%25E8%2583%25BD%25E5%258F%2591%25E6%258C%25A5&rsv_pq=cfa57fdb000ca2b8&rsv_t=90baaf7SXCjctYgbvksRan94UJd%2BMszGV4jkveqksu4g78tfHp3RghD%2F7hM&rqlang=cn&rsv_enter=0&rsv_dl=tb&rsv_btype=t&inputT=2826&rsv_sug3=13&rsv_sug1=8&rsv_sug7=100&prefixsug=cpu%2520PU%25E6%2595%2588%25E8%2583%25BD&rsp=0&rsv_sug4=3454&rsv_sug=1)	[CPU GPU都是PU，它们有什么区别](https://www.douyin.com/video/7427389939634949414)	[信息爆炸时代，CPU已经不够用了，更多“PU”正在路上](https://www.seccw.com/Document/detail/id/24596.html)	[中央处理器部分](https://baike.baidu.com/item/%E4%B8%AD%E5%A4%AE%E5%A4%84%E7%90%86%E5%99%A8%E9%83%A8%E5%88%86/21869720) 	

[除了CPUGPU 这些PU原来也这么厉害](https://news.mydrivers.com/1/574/574038.htm)	[各种PU（process unit）](https://www.163.com/dy/article/I1KRSSRM0553BYVT.html)	

CPU（中央处理器），**PU（处理单元）**

1. ‌**性能对比**‌：
   - ‌**CPU（中央处理器）**‌：CPU是计算机的核心部件，负责执行各种计算任务。它主要包括运算器（算术逻辑运算单元，ALU）和高速缓冲存储器（Cache），以及实现它们之间联系的数据、控制及状态的总线‌1。传统的CPU在多任务处理和高效能计算方面表现出色，但随着数据量的爆炸性增长，其处理能力逐渐显得力不从心‌。
   - ‌**PU（处理单元）**‌：为了应对数据处理的需求，出现了各种特定的PU，如GPU（图形处理单元）和NPU（神经网络处理单元）等。GPU在AI计算和图形处理方面表现出色，而NPU则在机器学习和深度学习任务中具有显著优势‌2。这些PU通过优化特定类型的计算任务，提高了整体系统的效能。
2. ‌**效能对比**‌：
   - ‌**CPU**‌：在传统的计算任务中，CPU仍然是最重要的处理单元，其强大的通用计算能力使其在各种应用中都有广泛的应用。然而，随着数据量的增加和计算需求的多样化，CPU的效能逐渐显得不足‌。
   - ‌**PU**‌：GPU和NPU等PU通过优化特定类型的计算任务，显著提高了处理速度和效能。GPU在图形处理和AI计算中表现出色，而NPU则在机器学习和深度学习任务中具有更高的效率。这些PU的出现和发展，使得计算机能够在特定任务中达到更高的效能‌。
3. ‌**应用场景**‌：
   - ‌**CPU**‌：适用于各种通用的计算任务，包括办公、编程、数据处理等‌。
   - ‌**GPU**‌：特别适用于图形处理、游戏和高性能计算（HPC）等领域‌。
   - ‌**NPU**‌：主要用于机器学习、深度学习和人工智能（AI）等任务‌。



### 指令集设计

[计算机的组成原理之CPU的指令集设计和Naja字节码](https://www.bilibili.com/video/BV1URqDYZERb/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	

## cpu架构

视频：[好：intel的Ring总线](https://www.bilibili.com/video/BV1hA411P7kQ/?vd_source=7346303e5e18677d7261c2c0c109ecfd)  [intel cpu即将告别mesh升级为Chiplet架构](https://www.bilibili.com/video/BV1xQ4y1h7ah?spm_id_from=333.788.recommend_more_video.-1&vd_source=7346303e5e18677d7261c2c0c109ecfd)	[chiplet大小核_百度搜索](https://www.baidu.com/s?ie=UTF-8&wd=chiplet%E5%A4%A7%E5%B0%8F%E6%A0%B8)	  [英特尔环形总线-bilibili](https://search.bilibili.com/video?vt=21285652&keyword=%E8%8B%B1%E7%89%B9%E5%B0%94%E7%8E%AF%E5%BD%A2%E6%80%BB%E7%BA%BF)  

NUMA: [NUMA_百度搜索](https://www.baidu.com/s?ie=UTF-8&wd=numa)  [numa](https://search.bilibili.com/all?vt=78365069&keyword=numa)

Chiplet技术： [intel cpu告别mesh升级为Chiplet架构](https://www.bilibili.com/video/BV1xQ4y1h7ah/?vd_source=7346303e5e18677d7261c2c0c109ecfd) 

[好：CPU架构全览：CPU微架构又是啥？](https://www.bilibili.com/video/BV1844y1z7Dx/?vd_source=7346303e5e18677d7261c2c0c109ecfd)   [时钟如何推动 CPU 前进?](https://www.bilibili.com/video/BV121SnYiE7E/?vd_source=7346303e5e18677d7261c2c0c109ecfd)     [CPU内部运作单元 ](https://zhuanlan.zhihu.com/p/477864185)   [CPU 流水线技术,缓存一致性,缓存命中率及其优化 ](https://zhuanlan.zhihu.com/p/671718467)   [英特尔设计师讲解晶体管技术](https://www.bilibili.com/video/BV1hx4y1S7jW?spm_id_from=333.788.videopod.sections&vd_source=7346303e5e18677d7261c2c0c109ecfd)	

[好：CPU微架构入门](https://www.bilibili.com/video/BV1nq4y1Z7Bn?spm_id_from=333.788.recommend_more_video.1&vd_source=7346303e5e18677d7261c2c0c109ecfd) 	

> 中央处理器主要包括==运算器==（[算术逻辑运算单元](https://zhida.zhihu.com/search?content_id=237400516&content_type=Article&match_order=1&q=算术逻辑运算单元&zhida_source=entity)，ALU，Arithmetic Logic Unit）和高速==缓存==存储器（Cache）及实现它们之间联系的==数据==（Data）、控制及状态的==总线==（Bus）。  它与内部存储器（Memory），输入/输出（I/O）设备合称为计算机三大核心部件

- cpu类似装配线，下面的4步构成cpu的基本构建模块，组合起来形成==cpu管道==； 管道阶段的平均数量会随着时间不断增加
  - 前端： 确保始终有足够指令供后端执行
    - Fetch预测：从内存中获取或==检索指令==，让cpu知道要执行哪个程序
    - Decode：将获取的指令解码为本机操作； ==获取指令并分解成多个内部操作==
      - 将指令解码为微架构的内部操作，称为微操作==uOps==
      - 后端会接收已解码的uOp，并利用超标量执行和乱序执行，高效地将uOp分配给执行单元
  - 后端: 超标量执行、
    - Execute执行：指令解码后，cpu执行这些指令，加减乘除数字运算、布尔运算、比较等
      - 超标量执行：最简单的执行形式是算术逻辑单元==ALU==; ALU并行运算时，叫做超标量执行
      - 乱序执行：例如餐馆出餐; 重排序缓冲区(ROB) Reorder Buffer
      - 有些ALU可同时对多个元素执行运算，这些元素叫做==矢量==
    - Write Back回写：cpu存储执行的结果，存在本地寄存器或内存中
- cpu架构预测分支：==预测执行==；  执行分支时，执行错误分支，浪费性能，去执行一些对程序执行并不需要的指令，分支预测，告诉我们正确的代码走向
- cpu频率增长速度快于内存增长速度，意味着从内存中获取数据需要更长时间，为了抵消往返主内存的时延较长带来的负面影响，将主内存的本地副本保存到==缓存==

| ![cpu管道](./硬件知识.assets/Snipaste_2024-11-01_15-33-04-1739630548884-89.jpg) | ![](./硬件知识.assets/Snipaste_2024-11-01_15-36-00-1739630548884-90.jpg) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| ![](./硬件知识.assets/Snipaste_2024-11-01_15-37-56-1739630548885-91.jpg) | ![](./硬件知识.assets/Snipaste_2024-11-01_15-38-31-1739630548885-92.jpg) |
| ![](./硬件知识.assets/Snipaste_2024-11-01_18-05-31-1739630548885-93.jpg) | ![](./硬件知识.assets/Snipaste_2024-11-01_18-45-43-1739630548886-94.jpg) |
| ![](./硬件知识.assets/Snipaste_2024-11-01_18-47-35-1739630548886-95.jpg) | ![](./硬件知识.assets/Snipaste_2024-11-01_18-49-57-1739630548886-96.jpg) |
| ![编译器使用ISA将高级语言代码转化为机器代码指令](./硬件知识.assets/Snipaste_2024-11-01_19-12-31-1739630548886-97.jpg) | ![](./硬件知识.assets/Snipaste_2024-11-01_19-20-19-1739630548886-98.jpg) |

**硬件中实现架构实例化** 

[在硬件中实现架构实例化_百度搜索](https://www.baidu.com/s?ie=UTF-8&wd=%E5%9C%A8%E7%A1%AC%E4%BB%B6%E4%B8%AD%E5%AE%9E%E7%8E%B0%E6%9E%B6%E6%9E%84%E5%AE%9E%E4%BE%8B%E5%8C%96)   [硬件实现](https://zhuanlan.zhihu.com/p/532397696) 

[硬件架构_硬件实战](https://blog.csdn.net/m0_58664890/article/details/135568369)  [从LED硬件控制流程认识Android架构！_硬件到应用框架图](https://blog.csdn.net/weixin_62622990/article/details/141724095)   [智能硬件产品架构搭建](https://blog.51cto.com/u_16213332/12205278)   [嵌入式系统软硬件架构和开发流程](https://www.sohu.com/a/405521988_467791)   [纯硬件产品的系统架构图](https://blog.51cto.com/u_16213394/11736445) 

- 逻辑电路
  - **逻辑门构成逻辑电路**： 晶体管就像开关，通过施加电流或电压信号控制开关状态，将开关按特定排列方式连接在一起，就形成了用来执行计算的所谓基本布尔逻辑运算符：与或非，这些开关排列就叫做==逻辑门==， ==将1和0组织起来或抽象成逻辑语言==，这种语言比物理语言和电子流更容易理解。 
  - **逻辑电路或功能块**： 用晶体管作为开关，将一个开关的输出端和另一个的输入端相连，就能构建成各种逻辑电路或功能块，这些功能块采用的形式包括==加法器、多路复用器、解码器、锁存器、触发器、寄存器、计数器等==
  - **将功能块链接在一起可实现复杂的逻辑功能 （微架构）** ： 可以使用它们构建自定义执行单元来执行特定的计算,例如cpu中的执行单元之一是算术逻辑单元,ALU；  ==设计cpu本质==就是构建多个专用处理原件，并用多种方式将它们连接起来,从而实现复杂的计算, 将这些处理元件组成一种设计，**从内存中获取指令、解码指令、执行指令，并将结果存回内存, 这就是微架构** ，或者==在硬件中实现架构实例化==
- ==如何从硬件到软件==：  [如何从硬件到软件_百度搜索](https://www.baidu.com/s?ie=UTF-8&wd=%E5%A6%82%E4%BD%95%E4%BB%8E%E7%A1%AC%E4%BB%B6%E5%88%B0%E8%BD%AF%E4%BB%B6)    [9个嵌入式硬件转软件小技巧 ](https://zhuanlan.zhihu.com/p/561656807)  [从硬件结构到软件](https://blog.csdn.net/m0_62792369/article/details/133776366)   [从硬件到软件全解析](https://mbd.baidu.com/newspage/data/dtlandingsuper?nid=dt_5257316068893743731) 
  - 当然是再添加一个抽象层
- 指令集架构: ISA， 是连接软件和硬件的关键环节
  - 指令集架构或ISA是一组指令，定义在硬件中可以执行哪些类型的操作， ISA是计算机的语言,是计算机的抽象模型
  - ISA描述了内存模型、支持的数据类型、寄存器和机器代码的行为，即cpu必须执行的0、1序列, ISA是连接软件和硬件的桥梁， 在软件方面，==编译器使用ISA将==用C、Perl、Java等==高级语言编写的代码==转化为机器代码指令，也就是cpu可以处理的语言。
  - 几类ISA: x86、ARM、MIPS等
  - ISA就是字典，描述了指令、数据类型，以及遵循这个ISA的cpu必须执行的格式,因此，程序员可以忽略ISA,而专注于编程语言能实现哪些功能
  - 就硬件而言，在设计cpu微架构时，ISA用作设计规范，告诉工程师它需要执行哪些操作，有了这一抽象层，ISA中的指令就与实现彼此独立; 计算机架构师会通过扩展指令集来持续发展ISA，就像字典添加新词，创建新指令往往是为了更高效地执行某些操作,并利用微架构中的新处理元件.

### FPGA

[什么是FPGA？](https://www.bilibili.com/video/BV1Tv6mYdESU/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	

新世纪

- 第一个十年：算力螺旋式上升
- 第二个十年：移动互联设备，统一数据、语音和媒体方面
- 第三个十年：大数据和智能

[fpga_百度搜索](https://www.baidu.com/s?ie=UTF-8&wd=fpga)   [CPU架构全览：陌生又熟悉的FPGA](https://www.bilibili.com/video/BV1rq4y1L7Rf/?vd_source=7346303e5e18677d7261c2c0c109ecfd)

[了解FPGA](https://blog.csdn.net/HackEle/article/details/139523157)  [全面解析FPGA](https://cloud.tencent.com/developer/article/2164022)  [什么是FPGA](https://zhuanlan.zhihu.com/p/658156669)  [FPGA是什么](https://zhuanlan.zhihu.com/p/637796919) [FPGA小白笔记](https://blog.csdn.net/2301_76461741/article/details/131816011)  [RISC-V知识库](https://knowledge.fpga-china.com/home/rsic/index.html?catId=247) 

[数字IC设计与计算架构基础](https://www.bilibili.com/video/BV1t8411S7Js/?vd_source=7346303e5e18677d7261c2c0c109ecfd) 

FPGA: 现场可编程门阵列（Field Programmable Gate Array），实时处理和路由大量数据，20世纪80年代中期发明

- 与其它电子设备不同之处：可随时对它进行编程，更新甚至改变其功能
- 前言
  - 3个基本门电路组成cpu等现代芯片的所有结构, 所有数字逻辑电路都可用这3个门电路构建
    - ==时钟==：`时钟就是按设定频率上升/下降的电压`，上升沿之间的时间，是一个以秒或几分之一秒计算的周期，知道周期，就能计算出==时钟在一定时间内上升与下降的次数==
      - FPGA通常以几百兆赫的频率运行，`100MHz=100,000,000`, 表示时钟1秒内会上升1亿次

    - ==触发器==：Flip flop,  (DFF = Flip flop)使用`门电路创建的存储设备`
      - 触发器的功用在于，其输入，即D输入，仅在`时钟从0升至1`时会被捕获,然后输出会存储在触发器的输出端,  不管D输入是否改变，Q输出端中D的值都会保持不变，`直到时钟再次上升` 
      - (电脑本质是0和1，触发器存的就是0或1)

    - 例子：用逻辑门构建2个数相加
      - 晶体管只能处理01，因此所有运算只能用01进行
      - 加法电路输出端添加触发器，每次时钟上升时，电路就会将2个数字相加，然后继续输入，并将结果存储在触发器的输出端，供电路其它部分使用。
      - 使用FPGA,可以让设计人员以很小的成本构建电路

    - ==ASIC==: ASIC是只有一家公司使用的定制芯片， 好处在于，它们对目标应用来说速度快且节能, 缺点设计成本高，这种芯片只适用于一组特定的应用
      - FPGA虽然速度没那么快，功耗那么低； 但只需几秒重新编程，即可增添一项新功能，用于一个新应用或对现有应用进行修复, 可修改实施方案，满足不断变化的解决方案需求。

- ==FPGA基本构建模块==,如何将这些模块结合起来，创建FPGA
  - **查找表**： LUT，look up table, 它连接到触发器，查找表让我们可以对逻辑函数进行编程
    - LUT和触发器，合并成更大的结构，ALM; 

  - **可编程路由与互连线模块**：
    - 在ASIC设计中，路由实际构建为，连接这些触发器和逻辑门的走线
    - 在FPGA中，这些路由走线设计为一个巨大的阵列，可通过编程来连接这些LUT和触发器, 正是这种可编程性使得FPGA相较于ASIC更加灵活,而可编程的代价是会降低走线速度

  - FPGA发展历程： 添加了越来越多的硬件功能，从而变得更易使用，更加适合各种各样的应用
    - 增大片上可写内存块,   ==仓库==
    - 为提高计算能力，添加了数字信号处理器，即DSP，以加快浮点和其它矩阵数学函数运算速度
    - 添加完整的处理子系统，这些子系统在FPGA结构旁边构建了CPU和cpu外设
    - 所有这些构建模块，都与一组丰富的可编程IO配对，满足各种应用的需求, 现代FPGA使用小芯片或tile来实施这些IO,然后连接到这个FPGA主芯片
      - 内存像遍布城市各处的仓库，将数据储存在靠近稍后要处理的数据的位置； DSP和这些CPU模块，是只需较低功耗就能处理这些数据的专用建筑物； 可编程IO，是将城市与芯片外城市连接的高速公路
      - FPGA设计人员面临的困境，是如何平衡可编程功能和固化功能； 开发者买的是整个芯片，可能为不需要的功能付费，另一方面，如果固化功能太少，设备在市场上可能没有竞争力,因为不得不使用太多宝贵的可编程逻辑，来实施本应已固化的功能，固化功能通常速度更快，功耗更低; 因此，现代FPGA是可编程逻辑和固化功能的混合

- ==如何对FPGA编程== 
  - FPGA开发人员在编写代码时，就是在**编写构成FPGA内部逻辑的代码**，通常用VHDL 或 Verilog
  - 硬件设计完成后，需设计一些软件连接FPGA，如果FPGA包含嵌入式CPU，则必须为该cpu开发软件
  - 目前，业内在推动进一步抽象FPGA的编程语言，使用Data Parallel C++等高级语言，利用oneAPI等框架进行编码，这种方法中，设计人员描述所需的数据转换，然后，编程语言会找到可构建到目标FPGA的正确结构。

- FPGA提供支持的==先进应用==: FPGA应用
  - 需要做出实时低时延决策的前沿应用： 实时物联网、嵌入式边缘应用、网络安全、无线网络、云和企业数据中心、人工智能


| ![ab2个数提取出来并相加](./硬件知识.assets/Snipaste_2024-11-05_16-20-34-1739630548887-99.jpg) | ![FPGA代码](./硬件知识.assets/Snipaste_2024-11-05_16-22-07-1739630548887-100.jpg) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| ![](./硬件知识.assets/Snipaste_2024-11-05_17-05-55-1739630548887-101.jpg) | ![触发器](./硬件知识.assets/Snipaste_2024-11-05_18-59-28-1739630548888-102.jpg) |
| ![LUT](./硬件知识.assets/Snipaste_2024-11-05_20-13-13-1739630548888-103.jpg) | ![合并成更大的结构ALM](./硬件知识.assets/Snipaste_2024-11-05_20-17-05-1739630548888-104.jpg) |
| ![](./硬件知识.assets/Snipaste_2024-11-05_20-19-48-1739630548888-105.jpg) | ![](./硬件知识.assets/Snipaste_2024-11-05_20-23-33-1739630548888-106.jpg) |
| ![](./硬件知识.assets/Snipaste_2024-11-05_20-27-21-1739630548888-107.jpg) | ![](./硬件知识.assets/Snipaste_2024-11-05_20-43-15-1739630548889-108.jpg) |
| ![](./硬件知识.assets/Snipaste_2024-11-05_21-02-02-1739630548889-109.jpg) | ![](./硬件知识.assets/Snipaste_2024-11-05_21-03-21-1739630548889-110.jpg) |

## ==计算机执行指令的过程==

[计算机执行指令的过程_北大计算机组成](https://www.bilibili.com/video/BV1VE411o7nx?vd_source=7346303e5e18677d7261c2c0c109ecfd&p=5&spm_id_from=333.788.videopod.episodes)	

[CPU是如何运行程序的？控制单元大揭秘](https://www.bilibili.com/video/BV194fkYhEAK?vd_source=7346303e5e18677d7261c2c0c109ecfd&spm_id_from=333.788.videopod.sections)	

### 位宽

CPU位宽指的是一个`时钟周期内CPU能处理的二进制位数`。例如当前64位CPU一次能处理64位数据，也就是8个字节。

位宽没有严格定义，一般从数值上：

CPU的位宽 = 数据总线的位宽 = CPU内部通用寄存器的位宽 = 机器字长

所以`CPU位宽和地址总线位宽没任何关系`，而是数据总线位宽。  寻址能力和地址总线有关

### 指令周期

[主频（CPU的时钟频率）外频倍频_百度百科](https://baike.baidu.com/item/%E4%B8%BB%E9%A2%91/103191?fr=ge_ala)	 [时钟周期、机器周期与指令周期_机器周期和时钟周期](https://blog.csdn.net/m0_61973119/article/details/135517500)	

[ 好：CPU内部各个部件的时延大概是多少？](https://www.zhihu.com/question/488790905/answer/2140661896)	

[时钟周期是T周期吗_百度搜索](https://www.baidu.com/s?ie=UTF-8&wd=%E6%97%B6%E9%92%9F%E5%91%A8%E6%9C%9F%E6%98%AFT%E5%91%A8%E6%9C%9F%E5%90%97)	[时钟周期、机器周期、指令周期](https://cloud.tencent.com/developer/article/2477391)	[定时器](https://zhuanlan.zhihu.com/p/686075261)	

[CPU时钟周期与主频的关系](https://www.elecfans.com/d/5907594.html)	

[秒、毫秒、微秒、纳秒以及赫兹对应换算表](https://blog.csdn.net/qq_26039331/article/details/103738290)	

- ==指令周期==: 一条指令从`取指令到执行完成的时间`间隔，  `f = 1/T`

- cpu周期： 机器周期

  - 一条指令周期划分为若干个机器周期，`每个机器周期完成一个基本操作`。**主存的工作周期(存取周期)为基础来规定CPU周期**，比如，可以用`CPU读取一个指令字的最短时间来`规定CPU周期不同的指令，可能包含不同数目的CPU周期。一个CPU周期中，包含若干个节拍脉冲（T周期）
  - **从内存里面读取一条指令的最短时间（与数据通路相关），规定为机器周期**

- ==时钟周期 (T周期)==, 时钟周期通常定义为机器`主频的倒数` , 时钟周期和T周期 是同一个概念

  - 时钟脉冲是计算机的基本工作脉冲，控制着计算机的工作节奏。时钟频率越高，时钟周期就越短，工作速度也就越快
  - 在一个CPU周期内，要完成若干个`微操作`。这些微操作有的可以同时执行，有的需要按先后次序串行执行。因而需要`把一个CPU周期分为若干个相等的时间段`，每一个时间段称为一个`节拍脉冲或T周期`
  - **若干个微操作** 

- CPU主频:  CPU在单位时间内能够完成的`指令周期数`。主频越高，意味着CPU在相同时间内能够执行更多的指令
  - 主频是单位时间内完成的指令周期数，而时钟周期则是完成一个指令周期所需的时间


[好：计算机执行指令的过程](https://www.bilibili.com/video/BV1VE411o7nx?vd_source=7346303e5e18677d7261c2c0c109ecfd&p=5&spm_id_from=333.788.videopod.episodes)	

****

| ![](./硬件知识.assets/t-1739630548889-111.png)               | ![](./硬件知识.assets/a1a-1739630548889-112.png)             |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| ![](./硬件知识.assets/a2a-1739630548890-113.png)             | ![](./硬件知识.assets/dbtl-1739630548890-114.png)            |
| ![](./硬件知识.assets/Snipaste_2025-02-05_12-00-53-1739630548890-115.jpg) | ![](./硬件知识.assets/Snipaste_2025-02-07_11-07-08-1739630548890-116.jpg) |
| ![](./硬件知识.assets/Snipaste_2025-02-07_11-08-50-1739630548890-117.jpg) | ![](./硬件知识.assets/Snipaste_2025-02-05_15-03-27-1739630548891-118.jpg) |
| ![](./硬件知识.assets/Snipaste_2025-02-05_15-06-28-1739630548891-119.jpg) |                                                              |

**补充：详情参见计算机性能指标**

> - ==时钟周期==：一个时钟脉冲所需要的时间。在计算机组成原理中又叫T周期或节拍脉冲(`错误，时钟周期不等于T周期`)。是CPU和其他单片机的基本时间单位。它可以表示为`时钟晶振频率（1秒钟的时钟脉冲数）的倒数`（也就是1s/时钟脉冲数，比如1/12MHz），对CPU来说，在一个时钟周期内，CPU仅完成一个最基本的动作。`时钟脉冲是计算机的基本工作脉冲，控制着计算机的工作节奏`。时钟频率越高，时钟周期就越短，工作速度也就越快。时钟周期在CPU的描述里也叫节拍，即将一个机器周期划分成若干个相等的时间段，每一段仅完成一个基本操作，用一个电平信号宽度对应。
> -  ==总线周期==：cpu从内存中读取指令，向内存中存取数据，对外设端口读写数据，执行总线周期，`总线周期通常包含4个T状态：T1，T2，T3,T4`。所谓一个T状态就是一个时钟周期。它是CPU执行操作的最小时间单位。 
> - ==机器周期==：通常用从内存中读取一个指令字的最短时间来规定CPU周期（机器周期），也即**CPU完成一个基本操作所需的时间**。通常一个机器周期包含12个时钟周期，在`8051`系列单片机的`一个机器周期由6个S周期（状态周期）`组成。 `一个S周期=2个节拍`（P），也就是一个状态周期包含2个时钟周期，所以8051单片机的一个机器周期=6个状态周期=12个时钟周期。又称CPU的工作周期或基本周期，总线周期。
>   - **从内存里面读取一条指令的最短时间（与数据通路相关），规定为机器周期**
> - ==指令周期==：执行一条指令所需要的时间，是从取指令、分析指令到执行完指令所需的全部时间，计算机中，常把一条指令的执行过程划分为若干个阶段，每一个阶段完成一项工作。每一项工作称为一个基本操作，==完成一个基本操作所需要的时间称为机器周期==，所以`一个指令周期`一般`由若干个机器周期`组成。指令不同，所需的机器周期也不同，比如一个复杂指令可能需要很多个机器周期才能完成，而`每个机器周期 又由多个时钟周期`完成。 

[主频（CPU的时钟频率）_百度百科](https://baike.baidu.com/item/%E4%B8%BB%E9%A2%91/103191?fr=ge_ala)	 [cpu时钟频率_百度搜索](https://www.baidu.com/s?ie=UTF-8&wd=cpu%E6%97%B6%E9%92%9F%E9%A2%91%E7%8E%87)	

[前端总线频率FSB](https://baike.baidu.com/item/%E5%89%8D%E7%AB%AF%E6%80%BB%E7%BA%BF%E9%A2%91%E7%8E%87/108464?fromModule=lemma_inlink)	[前端总线频率_百度搜索](https://www.baidu.com/s?ie=utf-8&fr=bks0000&wd=%E5%89%8D%E7%AB%AF%E6%80%BB%E7%BA%BF%E9%A2%91%E7%8E%87)	[北桥没了,还有前端总线吗_百度搜索](https://www.baidu.com/s?ie=utf-8&f=8&rsv_bp=1&tn=baidu&wd=%E5%8C%97%E6%A1%A5%E6%B2%A1%E4%BA%86%EF%BC%8C%E8%BF%98%E6%9C%89%E5%89%8D%E7%AB%AF%E6%80%BB%E7%BA%BF%E5%90%97&oq=%25E5%2589%258D%25E7%25AB%25AF%25E6%2580%25BB%25E7%25BA%25BF%25E9%25A2%2591%25E7%258E%2587&rsv_pq=de6dee55001a822d&rsv_t=9656dWTtU3slOTiQIACIXDi7ibuG1ozVtKxjyX%2F0n9ghKyYnrhcA7y1rwds&rqlang=cn&rsv_enter=1&rsv_dl=tb&rsv_sug3=30&rsv_sug1=21&rsv_sug7=100&rsv_sug2=0&rsv_btype=t&inputT=18632&rsv_sug4=21531)	 [芯片组详解：北桥、南桥与现代主板架构](https://blog.csdn.net/maopig/article/details/121341502)	 

> - ==外频==是CPU的基准频率，单位也是[MHz](https://baike.baidu.com/item/MHz/1879798?fromModule=lemma_inlink)。外频是CPU与主板之间[同步运行](https://baike.baidu.com/item/同步运行/53648639?fromModule=lemma_inlink)的速度，而且绝大部分[电脑系统](https://baike.baidu.com/item/电脑系统/10467448?fromModule=lemma_inlink)中外频也是内存与主板之间的同步运行的速度，在这种方式下，可以理解为CPU的外频直接与内存相连通，实现两者间的同步[运行状态](https://baike.baidu.com/item/运行状态/10781694?fromModule=lemma_inlink)；   
>   - `2GHz = 2000MHz` ,每秒产生20亿个时钟脉冲信号, 每个时钟信号周期为0.5纳秒。而Pentium 4 CPU有4条流水线运算单元，如果负载均匀的话，CPU在1个时钟周期内可以进行4个二进制加法运算,  意味着该Pentium 4 CPU每秒钟可以执行80亿条二进制加法运算
> - ==倍频==即主频与外频之比的倍数。主频、外频、倍频，其关系式：主频=外频×倍频。
> - 早期的CPU并没有“倍频”这个概念，那时主频和[系统总线](https://baike.baidu.com/item/系统总线/1190546?fromModule=lemma_inlink)的速度是一样的。随着技术的发展，CPU速度越来越快，内存、硬盘等配件逐渐跟不上CPU的速度了，而倍频的出现解决了这个问题，它可使内存等部件仍然工作在相对较低的[系统总线频率](https://baike.baidu.com/item/系统总线频率/7222326?fromModule=lemma_inlink)下，而CPU的主频可以通过倍频来无限提升（理论上）。
>   - 我们可以把外频看作是机器内的一条生产线，而倍频则是生产线的条数，一台机器[生产速度](https://baike.baidu.com/item/生产速度/8677041?fromModule=lemma_inlink)的快慢（主频）自然就是生产线的速度（外频）乘以生产线的条数（倍频）了。厂商基本上都已经把`倍频锁死`，要超频只有从外频下手，通过倍频与外频的搭配来对主板的跳线或在BIOS中设置[软超频](https://baike.baidu.com/item/软超频/6882258?fromModule=lemma_inlink)，从而达到计算机总体性能的部分提升。所以在购买的时候要尽量注意CPU的外频。
> - 总线是多个部件间的公共连线，用于在各个部件之间传输信息,  常以MHz来描述总线频率。总线的种类很多，==前端总线==的英文名字是Front Side Bus，通常用FSB表示，是将CPU连接到[北桥芯片](https://baike.baidu.com/item/北桥芯片/151758?fromModule=lemma_inlink)的总线。计算机的前端总线频率是由CPU和北桥芯片共同决定的
>   - 前端总线频率与外频的区别:  前端总线的速度指的是CPU和北桥芯片间总线的速度，而外频的概念是建立在数字脉冲信号震荡速度基础之上的。
>   - 在很长一段时间里，前端总线频率与外频是相同的，但随着计算机技术的发展，人们发现前端总线频率需要高于外频，因此采用了QDR（Quad Date Rate）技术，使得前端总线的频率成为外频的2倍、4倍甚至更高。
>   - 北桥芯片消失后，前端总线（FSB）也随之消失‌。北桥芯片在早期计算机中负责与CPU直接通信，并通过前端总线（FSB）进行数据传输。随着技术的发展，北桥芯片的功能逐渐被整合到CPU中，这使得前端总线也不再需要。Intel在2010年开启了“胶水时代”，将显卡整合在CPU中，形成了核心显卡，并增加了带宽和降低了延迟。随后，PCI-Express控制器也被整合到CPU中，进一步减少了北桥芯片的必要性。因此，随着北桥芯片的消失，前端总线也随之被淘汰‌

### 指令处理流程

[CPU 流水线技术,缓存一致性,缓存命中率及其优化](https://zhuanlan.zhihu.com/p/671718467)

[访存阶段_百度搜索](https://www.baidu.com/s?ie=UTF-8&wd=%E8%AE%BF%E5%AD%98%E9%98%B6%E6%AE%B5)   [数字电路设计——流水线处理器](https://blog.csdn.net/jiahonghao2002/article/details/131669183)   [指令流水线，多处理器和硬件多线程](https://blog.csdn.net/garbagerofsuct/article/details/133612117)  [自己动手写CPU（三）：MIPS处理器蓝图 ](https://zhuanlan.zhihu.com/p/565181895)  [CSAPP——Y86-64顺序实现](https://www.cnblogs.com/unioka/p/15761048.html)  [处理器体系结构](https://www.cnblogs.com/S1mpleBug/p/17551958.html)  [MIPS指令流水线数据通路通常包括](https://baijiahao.baidu.com/s?id=1799175813375124881&wfr=spider&for=pc)  [计算机执行的秘密：指令周期](https://baijiahao.baidu.com/s?id=1783524407989524365&wfr=spider&for=pc) 

[电子晶体管为何能运行软件代码](https://www.bilibili.com/video/BV14o1pYAE8s/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	

> 计算机三大核心部件: 运算器ALU、内部存储器、I/O
>
> CPU从存储器或高速缓存中取出指令，放入指令寄存器，并对指令译码
>
> 

- ==取指==令  [好：计算机执行指令的过程](https://www.bilibili.com/video/BV1VE411o7nx?vd_source=7346303e5e18677d7261c2c0c109ecfd&p=5&spm_id_from=333.788.videopod.episodes)	[好：动画带你理解CPU怎么执行一条指令](https://www.bilibili.com/video/BV15u4y187vA/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	[计算机执行指令的过程_百度搜索](https://www.baidu.com/s?ie=UTF-8&wd=%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%89%A7%E8%A1%8C%E6%8C%87%E4%BB%A4%E7%9A%84%E8%BF%87%E7%A8%8B)	
  - 控制器将`指令地址`送到存储器
  - 存储器按给定地址`读出指令`，送回控制器
  - **流程**：==a==、PC里的地址存入MAR,通过`地址总线`存入存储器MAR，同时，控制电路通过`控制总线`发出读数据； ==b、==通过地址译码器查到地址0001的内容，送入MDR,然后通过`数据总线`保存到cpu中的MDR， 同时保存到IR,然后更新PC 

- ==译码==： CPU根据存储器提取到的指令来决定其执行行为。在解码阶段，指令被拆解为有意义的片段，根据CPU的`指令集架构（ISA）定义将数值解译为指令`
  - 控制器`分析指令的操作性质`
  - 控制器向有关部件`发出指令所需的控制信号`
  - **流程**：送入`IR的指令，通过指令译码 翻译`，==发现是一个加法指令==，就知道指令要干什么了，然后控制电路据此产生控制信号，发到相关部件中。

- ==执行==： ==连接到==各种能够进行所需运算的==CPU部件==
  - 算数逻辑单元（ALU）执行三类计算：算数逻辑运算、计算内存引用有效地址、针对push和pop等计算栈指针的增减
  - 控制器从通用寄存器或存储器`取出操作数`
  - 控制器命令运算器对操作数进行指令规定的`运算`
  - **流程：** `ADD R0，[6]`，其中一个操作数[6]在存储器中， 地址放入MAR，通过地址总线存入存储器MAR, 然后类似取指，对应的地址内容送入MDR,因为要进行加法运算，送入ALU的Y寄存器，另一个操作数R0内容，送入X寄存器，ALU进行运算
    - 访存： 从内存获取数据，  指令和数据访问的是相同的存储器位置，但是用于不同的目的  
  - 回写：运算结果写入`通用寄存器 或 存储器`； 例子里 结果回写到RO寄存器中
- ==回写==(write back)： 将指令执行的`结果写回通用寄存器组`的过程
- 更新PC(PC update)：根据指令代码和分支标志，从前几步得出的信号值中，选出下一个`PC（程序计数器）`的值
  - 设置下一条指令的地址

### 数据通路

[数据通路_百度百科](https://baike.baidu.com/item/%E6%95%B0%E6%8D%AE%E9%80%9A%E8%B7%AF/6038383?fr=ge_ala)	 [数据通路_百度搜索](https://www.baidu.com/s?ie=UTF-8&wd=%E6%95%B0%E6%8D%AE%E9%80%9A%E8%B7%AF)	[计算机组成原理-CPU内部单总线数据通路](https://blog.csdn.net/weixin_69884785/article/details/136217716)	[CPU数据通路与控制器](https://blog.csdn.net/qq_42759112/article/details/143682305)  [数据通路](https://www.cnblogs.com/fate-/p/13180696.html) 		

- 数字系统中，各个`子系统通过数据总线连接形成的数据传送路径`称为数据通路
- `指令执行过程中数据所经过的路径`，包括路径上的部件，称为数据通路

## 指令流水

[指令流水_百度搜索](https://www.baidu.com/s?ie=UTF-8&wd=%E6%8C%87%E4%BB%A4%E6%B5%81%E6%B0%B4)	[好：计算机组成结构--中央处理器CPU](https://cloud.tencent.com/developer/article/1732527)	

IF:Instruction Fetch,取指令;  ID:Instruction Decode,译码;  WB:Write Back,写回

1、指令流水原理

- 指令的四级流水
- 五级流水
- 六级流水

2、影响流水线性能因素

- 结构相关
  - 多条指令进入流水线后在同一时钟周期内争用同一功能部件。`MEM取数和IF取指`会发生访存冲突：
    - 流水线完成前一条指令对数据的存储器访问时，暂停取后一条指令
    - 增设一个功能部件，独立存储器存放操作数和指令
    - 采用`指令预取`技术，将指令预取到指令队列中，这样取操作数操作便可以独占存储器访问
- 数据相关
  - 不同指令重叠操作，可能改变对操作数的读写访问顺序
    - RAW(Read After Write) 后面指令`用到前面指令所写的数据`
    - WAW(Write After Write) 两条指令`写同一个单元`， 在简单流水线中没有此类相关，因为不会乱序执行
    - WAR(Write After Read) 后面指令`覆盖前面指令所读的单元`， 在简单流水线中没有此类相关 解决办法： 可以推后后继指令对相关单元的读操作
  - 解决方式：
    -  后推法: 遇到数据相关时，停顿后继指令运行，直到前面指令结果已经生成 
    -  设置相关的直接通路"Forwarding"： 定向技术， 旁路技术， 将某条指令执行结果不送回寄存器而是直接送到其他指令所需的地方， 例：两条指令发生数据相关冲突RAW(Read After Write)
- 控制相关 
  - 由转移指令引起， 若是条件转移指令，则转移目标地址可能发生跳转，影响流水线效率。
  - 解决方式：延迟转移法、转移预测法

3、流水线性能

- 吞吐率 ：单位时间内流水线完成指令或输出结果数量
  - 最大吞吐率：流水线达到稳定状态后可获得的吞吐率， 这个值是固定的的

- 加速比： m段流水线速度与等功能非流水线速度之比
- 效率： 流水线中各功能段利用率

4、超级流水线技术： SuperPipeline，又叫做深度流水线，它是提高cpu速度通常采取的一种技术   

- ==超标量技术==
  - 超标量（superscalar）是指在CPU中有`一条以上的流水线`，并且每时钟周期内可以完成一条以上的指令，这种设计就叫超标量技术。 其实质是以空间换取时间。而超流水线是通过细化流水、提高主频，使得在一个机器周期内完成一个甚至多个操作，其实质是以时间换取空间。
- 超流水线技术
  - 在一个时钟周期内再分段，一个功能部件使用多次
- 超长指令字技术
  - 超常指令字（VLIW：VeryLongInstructionWord）是由美国Yale大学教授Fisher提出的。它有点类似于超级标量，是`一条指令来实现多个操作`的并行执行

## intel产品

[英特尔® 产品](https://www.intel.cn/content/www/cn/zh/products/overview.html)  [英特尔® 处理器名称、编号和代次列表](https://www.intel.cn/content/www/cn/zh/processors/processor-numbers.html)  [英特尔® 处理器所有系列](https://www.intel.cn/content/www/cn/zh/products/details/processors.html) 

[14代酷睿™ 处理器](https://www.intel.cn/content/www/cn/zh/products/details/processors/core.html) 

[Intel酷睿i系列处理器发展回顾（中）Intel最长寿的Skylake架构对应产品是如何由盛转衰？](https://www.bilibili.com/video/BV19P6GYFEsQ/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	

频率： ==cpu类似装配线==， 5GHz， **10^9，表示每秒计算50亿次** ‌,即每个阶段要在50亿分之一秒内完成   [5ghz每秒计算多少次](https://www.baidu.com/s?ie=utf-8&f=8&rsv_bp=1&tn=baidu&wd=5ghz%E6%AF%8F%E7%A7%92%E8%AE%A1%E7%AE%97%E5%A4%9A%E5%B0%91%E6%AC%A1&oq=GHz&rsv_pq=b966f799000068d7&rsv_t=d11etSkPWZ2lMvX9p7o964iLqh7G06yFYI2b5T6qfJjB7d1c53e9hxIguh4&rqlang=cn&rsv_enter=1&rsv_dl=tb&rsv_sug3=24&rsv_sug1=22&rsv_sug7=100&sug=5ghz%25E6%25AF%258F%25E7%25A7%2592%25E8%25AE%25A1%25E7%25AE%2597%25E5%25A4%259A%25E5%25B0%2591%25E6%25AC%25A1&rsv_n=1&bs=GHz) 

- [为什么13代酷睿CPU搭配DDR5内存性能表现更好](https://www.bilibili.com/read/cv17748261/)    [DDR5内存频率速度超CPU，性能飞跃还是资源浪费？](https://baijiahao.baidu.com/s?id=1810825612485147727&wfr=spider&for=pc)    [cpu频率和ddr5频率_百度搜索](https://www.baidu.com/s?ie=utf-8&f=8&rsv_bp=1&tn=baidu&wd=cpu%E9%A2%91%E7%8E%87%E5%92%8Cddr5%E9%A2%91%E7%8E%87&oq=1Ghz%25E7%25AD%2589%25E4%25BA%258E%25E5%25A4%259A%25E5%25B0%2591Mhz&rsv_pq=9b9b122500192328&rsv_t=b68fAyVDTH%2FRzfxPw4fQI%2FHMY6iC4AnfllN9X0aorKTEtU8%2Fnfg3haz1nfE&rqlang=cn&rsv_enter=1&rsv_dl=tb&rsv_sug3=29&rsv_sug1=23&rsv_sug7=100&rsv_sug2=0&rsv_btype=t&inputT=16258&rsv_sug4=19516)  [ddr5内存频率_百度搜索](https://www.baidu.com/s?ie=UTF-8&wd=ddr5%E5%86%85%E5%AD%98%E9%A2%91%E7%8E%87) 

**小结： 平台、cpu（代标、微架构、制程、接口）** 

[好：服务器 CPU 的型号、代际、片内与片间互联架构](https://cloud.tencent.com/developer/article/2376509)  

[桌面CPU 在微架构、IO 速率上的演进过程](https://mp.weixin.qq.com/s?__biz=MjM5Njg5NDgwNA==&mid=2247491381&idx=1&sn=7880920ac9768b7f68f557e6b15ef546#wechat_redirect)  [CPU 的型号、代际架构与微架构](https://mp.weixin.qq.com/s?__biz=MjM5Njg5NDgwNA==&mid=2247491339&idx=1&sn=2ea593e57d0f2cee2397bc9df2999671#wechat_redirect)  

杂：[至强SKU 编号](https://www.baidu.com/s?ie=utf-8&f=8&rsv_bp=1&tn=baidu&wd=%E8%87%B3%E5%BC%BASKU%20%E7%BC%96%E5%8F%B7&oq=SKU%2520%25E7%25BC%2596%25E5%258F%25B7&rsv_pq=aa862393003ef872&rsv_t=0213%2BsUPivrFNGEFnVvwoENo1w%2B8rS95nX%2BkhCeprYitqWot3m2kgcXov3c&rqlang=cn&rsv_enter=1&rsv_dl=tb&rsv_sug3=7&rsv_sug1=5&rsv_sug7=100&rsv_sug2=0&rsv_btype=t&inputT=3545&rsv_sug4=7390)  [platinum 8180属于第几代至强](https://www.baidu.com/s?ie=UTF-8&wd=platinum%208180%E5%B1%9E%E4%BA%8E%E7%AC%AC%E5%87%A0%E4%BB%A3%E8%87%B3%E5%BC%BA) [至强_百度百科](https://baike.baidu.com/item/%E8%87%B3%E5%BC%BA/1858238?fr=ge_ala)  [至强四位数字_百度搜索](https://www.baidu.com/s?ie=utf-8&f=8&rsv_bp=1&tn=baidu&wd=%E8%87%B3%E5%BC%BA%E5%9B%9B%E4%BD%8D%E6%95%B0%E5%AD%97&oq=%25E5%259B%259B%25E4%25BD%258D%25E6%2595%25B0%25E5%25AD%2597&rsv_pq=a42fe17a0168a33a&rsv_t=69bcT8DI9WFjMYOpSK24dMn6I9E5Qj5X2bCgd4hXcFL%2F2zLJF%2BFEDe0FOU0&rqlang=cn&rsv_dl=tb&rsv_enter=1&rsv_sug3=6&rsv_sug1=5&rsv_sug7=100&rsv_sug2=0&rsv_btype=t&inputT=3350&rsv_sug4=4535)   [Intel架构介绍 ](https://zhuanlan.zhihu.com/p/645726459) [为什么14代酷睿处理器性能一般，却称为史上最大变革呢](https://www.bilibili.com/opus/844409640066220080)	

单位： [kib](https://baijiahao.baidu.com/s?id=1789421042334538594&wfr=spider&for=pc)  [MiB](https://www.zhihu.com/question/24601215/answer/2340791330) 1Kib=1024字节， 1MiB=1024KiB , 1KB=1000Byte   



[至强处理器十二年发展历程-到09年](https://server.zol.com.cn/175/1751807_all.html) [至强-11年](https://www.51cto.com/article/254806.html)  [intel历代架构](https://blog.csdn.net/u013669912/article/details/141690767)  

[英特尔 Xeon CPU架构的革新之路](https://zhuanlan.zhihu.com/p/661436562)  [Intel-CPU及其架构-发展史](https://www.renrendoc.com/paper/87228545.html) [CPU架构](https://www.163.com/dy/article/F87U8PLQ0512MJDN.html)  [英特尔至强处理器技术](https://zhuanlan.zhihu.com/p/577717399)  [图解四代至强可扩展处理器家族 ](https://zhuanlan.zhihu.com/p/598703606) 

[intel处理器历代产品](https://cloud.tencent.com/developer/article/2126833)   [List of Intel CPU microarchitectures - Wikipedia](https://en.wikipedia.org/wiki/List_of_Intel_CPU_microarchitectures) 



> intel产品线

==intel产品线==： [官方：英特尔® 产品](https://www.intel.cn/content/www/cn/zh/products/overview.html)    [官方：==英特尔® 处理器==](https://www.intel.cn/content/www/cn/zh/products/details/processors.html)    [英特尔CPU有几个系列](https://zhidao.baidu.com/question/814271646749048812.html)    [面对服务器CPU之争，英特尔决定将产品线一分为二](https://baijiahao.baidu.com/s?id=1801029206201546449&wfr=spider&for=pc)   [英特尔的主要产品有哪些](https://blog.csdn.net/2301_77292307/article/details/139463696)   

[Intel系列CPU ](https://zhuanlan.zhihu.com/p/375054376) [intel处理器分类 ](https://www.cnblogs.com/wangmo/p/11158709.html)  

cpu比较： [英特尔® 产品规格对比](https://www.intel.cn/content/www/cn/zh/products/compare.html?productIds=236783,230500,134594)  

**迷你主机处理器**： [Intel N200_百度百科](https://baike.baidu.com/item/Intel%20N200?fromModule=lemma_search-box)   

- 迷你电脑： [全小核处理器 N100 / N200 现身](https://www.zhihu.com/question/555921827/answer/3599120895) 
- N系列处理器: 全小核, 专为教育、入门级计算和物联网应用打造   [N系列全小核处理器](https://mbd.baidu.com/newspage/data/dtlandingsuper?nid=dt_4165221364209529432)  [英特尔全小核处理器_百度搜索](https://www.baidu.com/s?ie=UTF-8&wd=%E8%8B%B1%E7%89%B9%E5%B0%94%E5%85%A8%E5%B0%8F%E6%A0%B8%E5%A4%84%E7%90%86%E5%99%A8)  [N100 / N200 ](https://www.ithome.com/0/643/535.htm) 
- U系列： 不是纯小核, U300 用于移动笔记本平台，而 U300E 用于嵌入式平台  [英特尔® 处理器](https://www.intel.cn/content/www/cn/zh/products/details/processors/intel-processor/products.html)   [U300、U300E处理器](https://www.fashaoyou.net/archives/13184) 

### 封装类型

[讲清楚芯片封装技术](https://www.bilibili.com/festival/jzj2023?bvid=BV1Yu411c7ic)   [现代芯片设计及常用芯片的原理和构架分析](https://www.bilibili.com/video/BV1W8411V7ke/?vd_source=7346303e5e18677d7261c2c0c109ecfd)  

**处理器封装类型**： [英特尔®台式机处理器封装类型指南](https://www.intel.cn/content/www/cn/zh/support/articles/000005670/processors.html?countrylabel=Asia%20Pacific)   [历代酷睿接口_百度搜索](https://www.baidu.com/s?ie=utf-8&f=3&rsv_bp=1&tn=baidu&wd=%E5%8E%86%E4%BB%A3%E9%85%B7%E7%9D%BF%E6%8E%A5%E5%8F%A3&oq=%25E5%258E%2586%25E4%25BB%25A3xeon%25E6%258E%25A5%25E5%258F%25A3&rsv_pq=a5b5d1d2001624cc&rsv_t=0c0f8W2O2nKS%2B5S06OGGiulr1MF%2BcsRL4KQBtGwNW%2FY74jVbGvbx98ZEIX4&rqlang=cn&rsv_enter=1&rsv_dl=ts_0&rsv_btype=t&rsv_sug3=33&rsv_sug1=30&rsv_sug7=100&rsv_sug2=1&prefixsug=%25E5%258E%2586%25E4%25BB%25A3xeon%25E6%258E%25A5%25E5%258F%25A3&rsp=0&rsv_sug4=5124&rsv_sug=1)   [历代英特尔酷睿CPU发布时间回顾](https://baijiahao.baidu.com/s?id=1799932224505755399&wfr=spider&for=pc)   [LGA3647接口](https://cpu.bmcx.com/slot_fclga3647__)   

[FCLGA_百度搜索](https://www.baidu.com/s?ie=UTF-8&wd=FCLGA)   [FCBGA, FCLBGA 倒装芯片封装](https://blog.csdn.net/jiangchao3392/article/details/115623749) 

[至强®处理器支持的插槽](https://www.intel.cn/content/www/cn/zh/support/articles/000055173/processors/intel-xeon-processors.html)  

- FC-LGAx 封装是最新封装类型, 是倒装芯片基板栅格阵列 x 的简称 

EMIB:  [EMIB是什么](https://www.eeworld.com.cn/emp/Intel/a381568.jspx)  [EMIB技术 ](https://www.elecfans.com/zt/1038470/) 

- EMIB（嵌入式多芯片互连桥接）是英特尔的一种2.5D先进封装技术，支持把不同的芯片放在同一块平面上相互连接
- 传统的2.5D封装是在芯片和基板间的硅中介层上进行布线，EMIB则是通过一个嵌入基板内部的单独芯片完成互连

### intel平台

**intel平台：**  [Purley平台](https://www.intel.cn/content/www/cn/zh/products/platforms/details/purley.html?wapkw=8160)  [英特尔"Alder Lake–S"、"Elkhart Lake"、"Ice Lake-SP"三大平台](https://www.comtech.cn/Index/show/127/941)   [Elkhart Lake：概述和技术文档](https://www.intel.cn/content/www/cn/zh/products/platforms/details/elkhart-lake.html)    [好：Intel历代平台](https://zhuanlan.zhihu.com/p/440757312)  [Intel CPU的代号/家族/微架构/第几代](https://www.zhihu.com/question/450709783/answer/3272504488) 

- 架构是指CPU是基于什么结构，比如多少纳米，多少组晶体管什么的， 平台则是指用于支持CPU运转的芯片组，也就是主板和内存什么的,不同的平台支持不同的CPU    [intel平台和架构关系](https://ask.zol.com.cn/x/9975632.html)   [好：Intel处理器可扩展平台](https://blog.csdn.net/qq_44807736/article/details/140763379) 

### 芯片之间互联

[快速信道互联](https://baike.baidu.com/item/%E5%BF%AB%E9%80%9F%E4%BF%A1%E9%81%93%E4%BA%92%E8%81%94/23316032?fr=ge_ala)  [QPI_百度搜索](https://www.baidu.com/s?ie=UTF-8&wd=QPI) [Intel QPI](https://zhuanlan.zhihu.com/p/715143312) 

- 每个 CPU 都支持多条内存，都可以通过内存控制器和自己的内存插槽上的内存进行通信;  CPU 如何访问另外一个 CPU 插槽上内存里的数据?  通过UPI 总线， Ultra Path Interconnect 
  - 2008年开始用QPI取代FSB
  - Intel于2017年发布的SkyLake-SP Xeon中，用UPI（**U**ltra**P**ath**I**nterconnect）取代QPI
  - GT/s即Giga Transmission per second （千兆传输/秒），描述的是[物理层](https://baike.baidu.com/item/物理层/4329158?fromModule=lemma_inlink)通信协议的速率，与Gbps（每秒十亿位）没有对应的换算关系   [GT/s](https://baike.baidu.com/item/GT%2Fs/7008611?fr=ge_ala)   [Gbit/s](https://www.zhihu.com/question/482336230)  [1Gbit/s](https://www.cnblogs.com/liushui-sky/p/14303485.html)  [Gbit/s_百度搜索](https://www.baidu.com/s?ie=UTF-8&wd=Gbit/s)   [8b/10b编码_百度搜索](https://www.baidu.com/s?ie=UTF-8&wd=8b/10b%E7%BC%96%E7%A0%81)    [GT/s和Gbps](https://blog.csdn.net/huxyc/article/details/128362564)  [好：PCIe速率计算 GT/s 到 MB/s](https://blog.csdn.net/limc00/article/details/138655774)  

### intel架构

大小核： [intel大小核哪一代开始的_百度搜索](https://www.baidu.com/s?ie=UTF-8&wd=intel%E5%A4%A7%E5%B0%8F%E6%A0%B8%E5%93%AA%E4%B8%80%E4%BB%A3%E5%BC%80%E5%A7%8B%E7%9A%84)   

[英特尔“大小核”也许只是个过渡方案？](https://baijiahao.baidu.com/s?id=1803275820915140888&wfr=spider&for=pc)  [2024年intel、AMD CPU知识扫盲](https://baijiahao.baidu.com/s?id=1789107020206303587&wfr=spider&for=pc)  [英特尔为什么要引入“大小核”架构](https://baijiahao.baidu.com/s?id=1749455384984209925&wfr=spider&for=pc)  [14代酷睿处理器](https://post.smzdm.com/p/a5x79v07/)   [酷睿独享大小核架构 至强CPU不会混搭：Intel解释原因](https://baijiahao.baidu.com/s?id=1762229676768139096&wfr=spider&for=pc)   [Intel的大小核CPU架构：最终还是把老游戏给坑了](https://baijiahao.baidu.com/s?id=1760052441055603295&wfr=spider&for=pc)   [什么是CPU大小核？为何很多人排斥Intel的大小核架构？ ](https://zhuanlan.zhihu.com/p/679123264)   [ 英特尔大小核是好还是坏？](https://www.zhihu.com/question/584028019/answer/3447930371)

- 2021年10月，英特尔发布了第12代酷睿处理器，正式引入了“大小核”设计，也就是官方口中的“异构多核”

#### 酷睿微架构

微架构：[Intel cpu架构](https://www.zhihu.com/question/23910068)  [代际架构与微架构](https://blog.itpub.net/70024922/viewspace-2992541/) [Intel微架构的演进](https://zhuanlan.zhihu.com/p/571333092)  [AMD 微架构的演进](https://zhuanlan.zhihu.com/p/517694124)  [好：代际、片内与片间互联架构](https://cloud.tencent.com/developer/article/2376509)       [Ring Bus到Mesh网络-CPU片内总线的进化之路](https://blog.csdn.net/qq_41854911/article/details/128194189)    [Intel大小核的由来](https://blog.csdn.net/weixin_46253800/article/details/141534989) 

酷睿：  [12代酷睿Alder Lake平台架构详解](https://www.sohu.com/a/484603579_116178)     [好：core架构](https://zhuanlan.zhihu.com/p/667104953)   [好：历代酷睿架构代号](https://www.dians.net/thread-2049.htm)      [好：酷睿系列发展史](https://qinming.blog.csdn.net/article/details/127411235?spm=1001.2101.3001.6650.5&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7ERate-5-127411235-blog-139463696.235%5Ev43%5Epc_blog_bottom_relevance_base8) 

- 命名规则：  [英特尔® 处理器名称、编号和代次列表](https://www.intel.cn/content/www/cn/zh/processors/processor-numbers.html)    [酷睿命名-微架构](https://cloud.tencent.com/developer/article/2354612)  
- 几代： 代际代表的 CPU 的生产年份不同、生产工艺不同、架构设计的不同。各个代际除了数字编号外，还会有一个英文代号。比如第 7 代的==代际编号==就是 Kaby Lake , ==7代微架构编号==Skylake   [代际与微架构](https://cloud.tencent.com/developer/article/2354612)   
- 2代：[二代酷睿处理器](https://cpu.zol.com.cn/211/2117241.html) 
- 14代：14代酷睿采用环形总线结构，大尺寸的P-Core和小尺寸的E-Core    [14代i9-14900K首测](https://post.smzdm.com/p/agql73m3/)   [4代酷睿处理器性能一般，却称为史上最大变革呢？](https://www.bilibili.com/read/cv26688127/?jump_opus=1) 
- 15代酷睿： 2024.10.10   [“第15代”英特尔CPU来袭](https://blog.csdn.net/zhengaga/article/details/143135510) [15代酷睿正式发布](https://baijiahao.baidu.com/s?id=1812610168905196685&wfr=spider&for=pc) 
- 平台： [酷睿™ Ultra 桌面处理器（系列 2）](https://www.intel.cn/content/www/cn/zh/products/docs/processors/core-ultra/core-ultra-desktop-processors-series-2-brief.html) 



**酷睿微架构**： [好：酷睿微架构die图说明 ](https://cloud.tencent.com/developer/article/2354612)   

[TLB_页表缓存](https://www.baidu.com/s?ie=UTF-8&wd=TLB)   [指令TLB](https://www.baidu.com/s?ie=UTF-8&wd=%E6%8C%87%E4%BB%A4%20TLB) 

- 14代：

#### 至强微架构

内存： [学会计算内存带宽](https://cloud.tencent.com/developer/article/2409937)  [Skylake (server) ](https://en.wikichip.org/wiki/intel/microarchitectures/skylake_(server))   [理解内存的Rank、位宽以及内存颗粒内部结构](https://cloud.tencent.com/developer/article/2418503)   [为什么服务器内存硬件上的黑色颗粒这么多？ ](https://cloud.tencent.com/developer/article/2429388)

intel:  2024至强6 

**微架构演化**： [好：Ring总线](https://www.bilibili.com/video/BV1hA411P7kQ/?vd_source=7346303e5e18677d7261c2c0c109ecfd)   [好：架构和平台-2022年](https://blog.csdn.net/qq_44807736/article/details/140763379)  [四五代至强-Chiplet技术](https://baijiahao.baidu.com/s?id=1785514434838658614&wfr=spider&for=pc)  [架构](https://cloud.tencent.com/developer/article/2376509) 

**至强**： [好：Xeon系列](https://blog.csdn.net/shipeng1022/article/details/134535464)  [好：最多28核!曝LGA3647至强CPU](https://baijiahao.baidu.com/s?id=1563175178982866&wfr=spider&for=pc) [至强CPU型号系列的变化](https://blog.csdn.net/jhkmichael/article/details/105896310)  

杂：[intel](https://baijiahao.baidu.com/s?id=1811272763680715545&wfr=spider&for=pc) 

- 至强平台： [Xeon第1代至第4代](https://blog.csdn.net/qq_44807736/article/details/142822432) 
  
- 命名规则
  - 至强命名规则：[E系列](https://blog.csdn.net/weixin_34711263/article/details/119311492?spm=1001.2101.3001.6650.1&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7EPaidSort-1-119311492-blog-134535464.235%5Ev43%5Epc_blog_bottom_relevance_base8) [E系列CPU参数 ](https://wenku.baidu.com/view/bc278d8ee009581b6bd9ebc0.html?_wkts_=1730028854225)  [ E系列](https://blog.csdn.net/weixin_34711263/article/details/119311492?spm=1001.2101.3001.6650.1&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7EPaidSort-1-119311492-blog-134535464.235%5Ev43%5Epc_blog_bottom_relevance_base8)   E3-1220, 单路cpu + 处理器封装接口
  - 至强可扩展命名规则： [至强® 可扩展处理器编号和后缀](https://www.intel.cn/content/www/cn/zh/support/articles/000059657/processors/intel-xeon-processors.html) 前2位：金银等+几代    [至强CPU](https://www.zhihu.com/question/354191933/answer/3444273874)  

- 至强产品系列: 至强处理器、至强可扩展处理器     [至强有哪些系列](https://www.intel.cn/content/www/cn/zh/products/details/processors.html) 
  - Xeon跟Core一样分为三个系列，另有[加速卡](https://baike.baidu.com/item/加速卡/9357493?fromModule=lemma_inlink)[Xeon Phi](https://baike.baidu.com/item/Xeon Phi/7079243?fromModule=lemma_inlink) , E3、E5、E7、Xeon Phi
  - 二代至强： CascadeLake架构的第二代智能英特尔至强可扩展处理器  platinum 8180  [最多28核LGA3647铂金黄金至强CPU](https://baijiahao.baidu.com/s?id=1563175178982866&wfr=spider&for=pc)  
  - 3代： [第三代英特尔® 至强® 可扩展处理器](https://www.intel.cn/content/www/cn/zh/now/data-centric/3rd-gen-intel-xeon-scalable-processors.html)  
  - 5代xeon： [图解第五代英特尔至强可扩展处理器 ](https://zhuanlan.zhihu.com/p/672696232)  
- 至强微架构演化： [CPU 在微架构、IO 速率上的演进过程](https://cloud.tencent.com/developer/article/2361129)   



==2017年Skylake== 之前，Intel 采样的方式是环状互联，也叫 Ring 架构

**Ring总线结构变化：** 也叫ring bus，环形总线,8核ring（8c ring）

- 单ring的极限是12c，即6+6组合
- intel针对不同规格的Die（主要指核心数）有不同定义
  - 10C及以下的都叫==LCC Ring==，1.5ring叫==MCC ring==,双ring则是==HCC Ring==：24核

**2D Mesh总线：** 为了降低超多核心的延迟，intel在SkylakeX产品线引入Mesh总线

- mesh总线替代了MCC和HCC ring，只剩下HCC ring
  - ==2017 年的 skylake 作为第一代==，目前到了第四代
  - 第二代至强：14nm的服务器产品，LGA2066都是hcc mesh，也叫hcc die； LGA3647最高28核，XCC die
  - 2021 年发布的 ice lake 中，更是设计到了 7 行 8 列的矩阵结构，共放了 40 个物理核

**Chiplet设计**:   [mesh升级为Chiplet架构](https://www.bilibili.com/video/BV1xQ4y1h7ah/?vd_source=7346303e5e18677d7261c2c0c109ecfd)   [Chiplet](https://search.bilibili.com/all?keyword=Chiplet%E6%9E%B6%E6%9E%84&search_source=5)   

| ![](./硬件知识.assets/Snipaste_2024-10-26_13-45-35-1739630548891-120.jpg) | ![ring](./硬件知识.assets/Snipaste_2024-10-26_13-46-40-1739630548891-121.jpg) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| ![1.5ring](./硬件知识.assets/Snipaste_2024-10-26_13-51-54-1739630548891-122.jpg) | ![双ring](./硬件知识.assets/Snipaste_2024-10-26_13-52-35-1739630548892-123.jpg) |
| ![mesh总线](./硬件知识.assets/Snipaste_2024-10-26_13-55-29-1739630548892-124.jpg) | ![至强架构](./硬件知识.assets/Snipaste_2024-10-28_16-39-53-1739630548892-125.jpg) |
| ![非至强架构，错误](./硬件知识.assets/intel-1739630548892-126.jpg) | ![非至强](./硬件知识.assets/Snipaste_2024-10-28_16-58-55-1739630548892-127.jpg) |
| ![](./硬件知识.assets/Snipaste_2024-10-28_16-50-32-1739630548893-128.jpg) | ![](./硬件知识.assets/Snipaste_2024-10-29_00-00-53-1739630548893-129.jpg) |
| ![chiplet大小核](./硬件知识.assets/Snipaste_2024-10-30_16-36-03-1739630548893-130.jpg) | ![](./硬件知识.assets/2022-1739630548893-131.png)            |

## AMD

[AMD 锐龙台式处理器](https://www.amd.com/zh-cn/products/processors/desktops/ryzen.html#tabs-4e0f42ce0d-item-39821b9440-tab)	[Ryzen 3、5、7 和 9](https://baijiahao.baidu.com/s?id=1742012526797179886&wfr=spider&for=pc)	[5000系列下的ryzen5 7 9区别_百度搜索](https://www.baidu.com/s?ie=UTF-8&wd=5000%E7%B3%BB%E5%88%97%E4%B8%8B%E7%9A%84ryzen5%207%209%E5%8C%BA%E5%88%AB)	

[AMD台式机和笔记本平台CPU命名规则](https://baijiahao.baidu.com/s?id=1806004570239797468&wfr=spider&for=pc)  [2023+ Mobile ](https://community.amd.com/t5/corporate/announcing-new-model-numbers-for-2023-mobile-processors/ba-p/543985)		 [AMD CPU命名规则_百度搜索](https://www.baidu.com/s?ie=UTF-8&wd=AMD%20CPU%E5%91%BD%E5%90%8D%E8%A7%84%E5%88%99)	[AMD's New Ryzen Mobile CPU Naming Scheme Explained](https://beebom.com/amd-ryzen-mobile-cpu-new-naming-scheme-explained/)	

[AMD 锐龙处理器购买途径](https://www.amd.com/zh-cn/where-to-buy/processors/ryzen.html)	[AMD官方旗舰店-天猫](https://amd.tmall.com/shop/view_shop.htm) 	

视频： [I A两家CPU设计区别](https://www.bilibili.com/video/BV11J411k71z/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	[AMD是如何凭借ZEN架构翻盘的](https://www.bilibili.com/video/BV1684y1A7H9/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	[AMD的Zen2和Zen3及Zen3+架构区别](https://www.bilibili.com/video/BV1Ur4y1E7qs/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	 [关于AMD锐龙处理器ccx，ccd，iod和if总线的讲解](https://www.bilibili.com/video/BV1gmWDeLE8V?spm_id_from=333.788.recommend_more_video.-1&vd_source=7346303e5e18677d7261c2c0c109ecfd) 	[AMD的chiplet技术](https://www.bilibili.com/video/BV16X4y1E7HW/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	

die shot： [amd 7040系zen4架构的Phoenix1拆解](https://www.bilibili.com/video/BV1hk4y1w72X/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	 

| ![](./硬件知识.assets/amd-1739630548893-132.png) | ![]() |
| ------------------------------------------------ | ----- |



# GPU

## 英伟达

视频： [英伟达的GPU架构](https://www.bilibili.com/video/BV1134y1N7vQ?spm_id_from=333.788.recommend_more_video.3&vd_source=7346303e5e18677d7261c2c0c109ecfd)  [英伟达GPU架构演进(2010-2022)](https://www.bilibili.com/video/BV1cB4y1Q75r/?vd_source=7346303e5e18677d7261c2c0c109ecfd)   [AMD的GPU体系架构](https://www.bilibili.com/video/BV19E421L7XE/?vd_source=7346303e5e18677d7261c2c0c109ecfd) 		[NV架构师讲解GPU如何工作](https://www.bilibili.com/video/BV11F4m157x1/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	[ RTX5090拆解](https://www.bilibili.com/video/BV1eoFyekEY2/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	

[显卡比较](https://www.nvidia.cn/geforce/graphics-cards/compare/?section=compare-16) 

> 架构解析/CUDA Core/Tensor Core/RT core



| ![](./硬件知识.assets/Snipaste_2024-10-30_17-04-42-1739630548894-133.jpg) | ![](./硬件知识.assets/Snipaste_2024-10-30_17-22-29-1739630548894-134.jpg) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| ![](./硬件知识.assets/Snipaste_2024-10-30_17-59-39-1739630548894-135.jpg) | ![](./硬件知识.assets/Snipaste_2024-10-30_18-01-31-1739630548894-136.jpg) |
| ![](./硬件知识.assets/Snipaste_2024-10-30_18-02-05-1739630548894-137.jpg) | ![]()                                                        |
| ![]()                                                        | ![]()                                                        |

# 内存管理

[CPU 流水线技术,缓存一致性,缓存命中率及其优化 - 深度好文](https://zhuanlan.zhihu.com/p/671718467)	  [图解内存分页原理](https://www.bilibili.com/video/BV1q1CNYfEWw/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	[栈为何如此之快](https://www.bilibili.com/video/BV1NtcceqEh6/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	[图解内存分页原理](https://www.bilibili.com/video/BV1q1CNYfEWw/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	

[微积分可视化](https://www.bilibili.com/video/BV1PF19YkEAc/?vd_source=7346303e5e18677d7261c2c0c109ecfd)

[深入理解内存工作原理：从锁存器到随机存取存储器](https://www.bilibili.com/video/BV1oscfe9Eyh/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	

## 缓存

[现代 CPU 缓存层次结构](https://www.bilibili.com/video/BV1c6kHY5EnW/?vd_source=7346303e5e18677d7261c2c0c109ecfd)   [（中文配音）现代 CPU 缓存层次结构的剖析](https://www.bilibili.com/video/BV1GMqDYcE5w/?vd_source=7346303e5e18677d7261c2c0c109ecfd)		[CPU 流水线技术,缓存一致性,缓存命中率及其优化 ](https://zhuanlan.zhihu.com/p/671718467)	

Cache:  CPU缓存(Cache Memory)即高速缓存存储器,  位于CPU和主内存之间的一种容量较小但速度很快的存储器。因为内存的访问速度非常慢

- 一级缓存： 分为一级==数据==缓存(Data Cache，D-Cache D表)和一级==指令==缓存(Instruction Cache，I-Cache,I表)
- L2 Cache：  位于==L1缓存和主内存之间==，用于存储更多的数据和指令，以便在L1缓存未命中时提供更多的备份
- L3缓存： 位于==处理器核心之间的共享缓存==，多个处理器核心可以共享相同的L3缓存。这有助于减少核心之间的数据传输时延。

| ![](./硬件知识.assets/Snipaste_2025-01-13_21-07-55-1739630548895-138.jpg) | ![](./硬件知识.assets/Snipaste_2025-01-13_21-12-52-1739630548895-139.jpg) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |



## CPU寻址模式

TLB： [TLB_百度搜索](https://www.baidu.com/s?ie=UTF-8&wd=TLB)  [好： 什么是TLB?](https://cloud.tencent.com/developer/article/1432783)  [什么是TLB-阿里云开发者社区](https://developer.aliyun.com/article/1483609)   [好：TLB机制 ](https://www.cnblogs.com/onetrainee/p/12738275.html)  [CPU先尝试从TLB找到物理地址_百度搜索](https://www.baidu.com/s?ie=UTF-8&wd=CPU%E5%85%88%E5%B0%9D%E8%AF%95%E4%BB%8ETLB%E6%89%BE%E5%88%B0%E7%89%A9%E7%90%86%E5%9C%B0%E5%9D%80)   [转译后备缓冲器](https://baike.baidu.com/item/%E8%BD%AC%E8%AF%91%E5%90%8E%E5%A4%87%E7%BC%93%E5%86%B2%E5%99%A8/22694635?fr=ge_ala)  [虚拟存储器及TLB介绍](https://zhuanlan.zhihu.com/p/627504499)  [TLB的作用及工作过程](https://blog.csdn.net/mmliuyiding/article/details/94390947)    [TLB](https://www.bilibili.com/video/BV1mF411w7Re/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	

cpu寻址模式： [PIPT_百度搜索](https://www.baidu.com/s?ie=UTF-8&wd=PIPT)   [关于Cache的歧义/别名问题和VIVT/VIPT/PIPT架构](https://zhuanlan.zhihu.com/p/577138649)   [Cache（一）：VIVT、VIPT、PIPT等概要](https://blog.csdn.net/weixin_45264425/article/details/128294088)  [Cache的组织形式（VIVT、VIPT、PIPT） ](https://zhuanlan.zhihu.com/p/586966358)  [cache组织方式(VIVT、VIPT、PIPT) ](https://zhuanlan.zhihu.com/p/599879178) [深入理解CACHE VIPT与PIPT的工作原理 ](https://zhuanlan.zhihu.com/p/673712821)  [万字整理内存管理之Cache_cache_主存_缓存](https://www.sohu.com/a/617149325_121124374)	[知识点18：VIVT、VIPT、PIPT的介绍](https://blog.csdn.net/weixin_42135087/article/details/133578270)	


| ![](./硬件知识.assets/Snipaste_2024-11-15_15-15-18-1739630548895-140.jpg) | ![](./硬件知识.assets/Snipaste_2024-11-15_15-18-40-1739630548895-141.jpg) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| ![TLB](./硬件知识.assets/Snipaste_2024-11-15_15-28-59-1739630548895-142.jpg) | ![](./硬件知识.assets/Snipaste_2024-11-15_17-27-18-1739630548896-143.jpg) |
| ![](./硬件知识.assets/Snipaste_2024-11-15_17-25-53-1739630548896-144.jpg) |                                                              |

**CPU寻址模式**: 

- TLB是通过==线性地址==找物理地址的，缓存是通过==物理地址==找数据的
- TLB中以==页==（存放页地址的表）为单位来存储的，缓存直接按照==字节==来进行存储的

- **TLB转译后备缓冲器**（Translation Lookaside Buffer），在中国也被翻译为**页表缓存**、**转址旁路缓存**，为CPU的一种缓存，由存储器管理单元用于改进虚拟地址到物理地址的转译速度( `用于加速虚拟地址到物理地址的转换过程` )
  - 直译为旁路转换缓冲，也可以把它理解成页表缓冲。`里面存放的是一些页表文件`（虚拟地址到物理地址的转换表） 
  - 当处理器要在主内存寻址时，`不是直接在内存的物理地址里查找`的，而是通过一组虚拟地址转换到主内存的物理地址，TLB就是负责将虚拟内存地址翻译成实际的物理内 存地址，而CPU寻址时会优先在TLB中进行寻址。处理器的性能就和寻址的命中率有很大的关系
- 由于CPU首先接到的是由程序传来的虚拟内存地址，所以CPU必须先到物理内存中==取页表==，然后对应程序传来的虚拟页面号，在表里找到对应的物理页面号，最后才能访问实际的物理内存地址，也就是说整个过程中CPU必须访问两次物理内存(实际上访问的次数更多)。因此，为了减少CPU访问物理内存的次 数，引入TLB。

1. CPU==先尝试从TLB找到物理地址==； => `先页表缓存，没有就手动计算出物理地址`
2. 如果TLB中不存在对应的物理地址，则==手动计算出物理地址==；
3. 之后再从==缓存==中尝试获取物理地址对应的数据；
4. 如果缓存中没有，则去物理==内存==中找到相应地址来读取对应的数据。

[ 32 位保护模式与内存分段机制](https://cloud.tencent.com/developer/article/2031590)	 [x86-64处理器的几种运行模式 - 知乎](https://zhuanlan.zhihu.com/p/69334474)	[64位还有保护模式_百度搜索](https://www.baidu.com/s?ie=utf-8&f=8&rsv_bp=1&tn=baidu&wd=64%E4%BD%8D%E8%BF%98%E6%9C%89%E4%BF%9D%E6%8A%A4%E6%A8%A1%E5%BC%8F&oq=64%25E4%25BD%258Dhaiy%25E4%25BF%259D%25E6%258A%25A4%25E6%25A8%25A1%25E5%25BC%258F&rsv_pq=8e6a1066000da085&rsv_t=d700670OxRreksmfD2dgockgotGg1Bl9OkjfhNzqM%2BXbGMve7dE6ujUzECQ&rqlang=cn&rsv_enter=1&rsv_dl=tb&rsv_sug3=8&rsv_sug2=0&rsv_btype=t&inputT=18799&rsv_sug4=18799)	[内存保护模式_百度搜索](https://www.baidu.com/s?ie=utf-8&f=8&rsv_bp=1&tn=baidu&wd=%E5%86%85%E5%AD%98%E4%BF%9D%E6%8A%A4%E6%A8%A1%E5%BC%8F&oq=%25E4%25BF%259D%25E6%258A%25A4%25E6%25A8%25A1%25E5%25BC%258F&rsv_pq=8544c50000007b73&rsv_t=cd2f7b0SAjnSrjOvW7O2MOfE%2BLgu2B3opa2juBvILCRRjUQYRawkhJrTLO0&rqlang=cn&rsv_enter=1&rsv_dl=tb&rsv_sug3=5&rsv_sug1=2&rsv_sug7=100&bs=%E4%BF%9D%E6%8A%A4%E6%A8%A1%E5%BC%8F)	

## ==虚拟内存和页表== 

**分段分页的原因**： [好：虚拟内存 、分段、分页的理解](https://www.cnblogs.com/myseries/p/12487211.html)  [操作系统管理内存的机制——为什么要设置虚拟内存？ ](https://www.cnblogs.com/wujing-hubei/p/6253380.html)	   [操作系统内存管理机制发展概览](https://blog.csdn.net/n567656756765676567/article/details/10416545)	  [存储模型 ](https://www.cnblogs.com/charon922/articles/8778170.html)	

[CPU 流水线技术,缓存一致性,缓存命中率及其优化](https://zhuanlan.zhihu.com/p/671718467)	 [内存5大分区 ](https://www.jianshu.com/p/9c3b4bdda5fc)  [iOS-底层原理 ](https://blog.51cto.com/u_12801393/2970268)	

[操作系统之内存管理 ( 虚拟内存，页面置换算法，分段等)](https://baijiahao.baidu.com/s?id=1717508522984565904&wfr=spider&for=pc)	  

栈区、堆区、全局区、常量区、代码区

**早期的内存分配方法问题**：  

1. 进程==地址空间不隔离==
   1. 程序直接访问物理内存，所以恶意`程序可以修改别的进程的内存数据`
2. 内存==使用效率低==
   1. 程序运行内存不够时， 系统必须在已运行的程序中选择一个，将该程序的数据暂时拷贝到硬盘上，释放出部分空间来供程序C使用，再将程序C的数据全部装入内存中运行，有`大量数据装入装出`，效率低
3. 程序==运行的地址不确定==
   1. 系统会在内存剩余空间中随机分配一段连续空间给程序C使用，因为是`随机分配`的，所以程序运行的地址是不确定的

### 内存5大区

[内存](https://zhuanlan.zhihu.com/p/625618336)	

逻辑上分为三个区域段：**动态分配段、代码段、静态数据段**

栈是一种线性数据，堆一种链式数据

- **段表**： 程序-逻辑段，内存-逻辑段对应位置
  - 在分段式存储管理系统中，每个进程或==程序==都有一个或多个==逻辑段==，为使程序或称进程能正常运行，能==从物理内存中找出每个逻辑段所对应的位置==，在系统中为每个进程建立一张段映射表，简称 **段表**，==段表记录==了进程中每一个==段在内存中的起始地址==(又称为"基址" )、段号和段的长度。
    - **程序分为多个逻辑段** 
    - 段表： 系统为每个进程建立一张段映射表， 逻辑段 <=> 内存中的位置， ==段表记录段在内存中的起始地址== 
- 存储管理方式从==固定分区到动态分区==分配，又发展到==分页==存储管理方式， 主要是为了提高内存利用率
  - 分段存储管理方式中，作业的地址空间被划分为若干个段，每个段定义了一组逻辑信息。例如，主==程序段 ，数据段及栈段==等
  - 通常可用一个段号来代替段名，每个段都==从0开始编址==，并采用一段连续的地址空间。段的长度由相应的逻辑信息组的长度决定，因而各段长度不等。整个作业的地址空间由于是分成多个段，因而是二维的，其逻辑地址由段号(段名)和段内地址所组成
  - **分段**：就是将一个程序分成代码段，数据段，堆栈段，每个段各自管理不同的数据
  - 为了实现分段技术，需要引入==虚拟地址空间==的概念, 程序被分成段之后，其==在程序中操作的地址就是段地址（虚拟地址）== 
    - 常量区
    - 全局区
      - bss段（bss segment）：bss是Block Started by Symbol的简称，用来存放程序中`未初始化`的全局变量的内存区域，属于静态内存分配。   [分段](https://zhuanlan.zhihu.com/p/671718467)	 
      - data段（data segment）：用来存放程序中`已初始化`的全局变量的内存区域，属于静态内存分配。
    - text段（text segment）：用来存放程序执行`代码`的内存区域。这部分区域的大小在程序运行前就已经确定，并且内存区域通常属于只读（某些架构也允许代码段为可写，即允许修改程序）。也有可能包含一些只读的常数变量，例如字符串常量等。
    - 堆（heap）：用于存放进程运行中被动态分配的内存段，它的大小并不固定，可动态扩张或缩减。
    - 栈（stack）：用户存放程序临时创建的==局部变量==，也就是说我们函数括弧“{}”中定义的变量（但不包括static声明的变量，static意味着在data段中存放变量）。除此以外，在函数被调用时，其参数也会被压入发起调用的进程栈中，并且待到调用结束后，函数的返回值也会被存放回栈中
  - ==段表==（Segment Table）是在分段式存储管理系统中使用的一种数据结构，它记录了==程序中每个逻辑段在内存中的起始地址==（也称为“基址”）、段号和段的长度。==段表==的主要目的是==为了在内存中找到每个逻辑段所对应的位置==，以便进行地址转换和访问控制
  - 分段管理虽然减少了内存碎片，但是减少的还是不够多，为了合理的使用内存的空间，**进一步减少内存碎片问题，引入分页机制**
    - 把内存分为固定大小的分区，程序也被切成固定大小分区；==内存固定大小的分区，叫页框==，也是帧frames，而==程序的固定大小分区称为页面==，也是pages；很明显：页框的大小是等于页面的大小的

> 地址以`0x1开头`，说明是存放在`常量区` , 地址以`0x6开头`，说明是存放在`堆区` , 地址以`0x7开头`，说明是存放在`栈区`

[内存五大区_百度搜索](https://www.baidu.com/s?ie=UTF-8&wd=%E5%86%85%E5%AD%98%E4%BA%94%E5%A4%A7%E5%8C%BA)	[内存五大区_百度图片搜索](https://image.baidu.com/search/index?tn=baiduimage&ps=1&ct=201326592&lm=-1&cl=2&nc=1&ie=utf-8&dyTabStr=MCwxMiwzLDEsMiwxMyw3LDYsNSw5&word=%E5%86%85%E5%AD%98%E4%BA%94%E5%A4%A7%E5%8C%BA)	[内存结构与内存管理 ](https://www.jianshu.com/p/c41023ee5ba0)	[好：iOS内存五大区存储空间](https://juejin.cn/post/7024004474859421704)	

[c++内存管理](https://www.cnblogs.com/icmzn/p/11824802.html)	 [JVM内存模型和结构详解(五大模型图解)](https://blog.csdn.net/AliceNo/article/details/134663983)	

[OC简介Objective-C](https://blog.csdn.net/u012426382/article/details/40395111?spm=1001.2101.3001.6650.3&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogOpenSearchComplete%7ERate-3-40395111-blog-48462471.235%5Ev43%5Epc_blog_bottom_relevance_base4)	[OC对象存储](https://blog.csdn.net/ximdefangzh/article/details/48462471)	

[探索栈的存在：如何管理函数调用与递归](https://www.bilibili.com/video/BV14ZrXYuE7c/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	

代码区，常量区，全局区/静态区、堆、栈

- 栈区：栈区内存分配`包括动态分配和静态分配`。静态分配时内存分配和释放都由编译器来处理。动态分配时内存的分配是 alloc 的时候分配的，释放的时候是由编译器来释放的。但一般不允许栈区做动态分配内存。
  - 函数执行的时候会向系统索要资源，内存随着函数的执行而分配，函数的结束而回收，只要剩余空间大于索要空间，则会自动给与内存，当索要空间大于剩余空间时，会出现 Stack Overflow 崩溃
  - `栈帧`是指`函数（运行中且未完成）占用的一块独立的连续内存区域`
  - 应用中新创建的==每个线程都有专用的栈空间==，栈可以在线程期间自由使用。而线程中有千千万万的函数调用，这些函数`共享`进程（应该是线程吧）的这个`栈空间`。==每个函数所使用的栈空间是一个栈帧==，所有的栈帧就组成了这个线程完整的栈
  - 函数调用是发生在`栈`上的，每个`函数的相关信息`（例如局部变量、调用记录等）都`存储在一个栈帧`中，每执行一次`函数调用`，就会生成一个与其相关的栈帧，然后将其`栈帧压入函数栈`，而当函数`执行结束`，则将此函数对应的`栈帧出栈并释放掉`
- 堆区：内存都是动态分配的，内存的`分配和释放是由程序员来管理`的。
  - iOS 中，`堆区的内存是应用程序共享的`，堆中的内存分配是系统负责的。系统使用一个`链表`来维护所有已经分配的内存空间（系统仅仅纪录，并不管理具体的内容）。变量使用结束后，需要释放内存，OC中是根据引用计数＝＝0，没有任何变量使用该空间系统将收回。
  - 操作系统有一个`记录空闲内存的链表`。当接收到内存空间申请时，会查询链表，找到第一个空间大于申请空间的堆节点，将空间分配出去同时在链表中删除该区域。另外系统会自动回收分配空间多余的部分放回链表中
  - OC中对象的指针存放在栈内存中，而对象 alloc 出来的对象在堆内存中，`栈内存中的指针通过赋值指向堆内存中的对象`，然后通过栈内存的指针访问对象/变量。也就是说，我们==创建一个对象的时候是用了堆和栈两个内存空间==

- 全局区（静态区，即.bss & .data）     [Block Started by Symbol_百度搜索](https://www.baidu.com/s?ie=UTF-8&wd=Block%20Started%20by%20Symbol)	

  - 全局区是`编译时分配`的内存空间，在iOS中一般以`0x1开头`，在程序运行过程中，此内存中的数据一直存在，`程序结束后由系统释放`，主要存放
    - `未初始化`的`全局变量`和`静态变量`，即BSS区（.bss）   `Block Started by Symbol`   以符号开始的块 
    - `已初始化`的`全局变量`和`静态变量`，即数据区（.data）
    - 其中，全局变量是指变量值可以在运行时被动态修改，而静态变量是static修饰的变量，包含静态局部变量和静态全局变量

- 常量区（即.rodata）

  - 常量区是编译时分配的内存空间，在程序结束后由系统释放，主要存放
    - 已经使用了的，且没有指向的字符串常量
    - 字符串常量因为可能在程序中被多次使用，所以在程序运行之前就会提前分配内存

- 代码区（即.text）

  - 代码区是`编译时分配`主要用于存放`程序运行时的代码`,代码会被编译成`二进制存进内存`的


[内存五大区](https://www.cnblogs.com/zyzmlc/p/14078056.html) [五大分区](https://www.cnblogs.com/zhouhongyuan/p/17627549.html)	[堆、栈、堆区、栈区的概念和区别](https://www.cnblogs.com/feily/articles/14081630.html)		[内存五大区_百度搜索](https://www.baidu.com/s?ie=UTF-8&wd=%E5%86%85%E5%AD%98%E4%BA%94%E5%A4%A7%E5%8C%BA)	

> **内存五大区**‌是指计算机内存中五个主要的区域，它们分别是：栈区（Stack）、堆区（Heap）、全局静态区（BSS/数据段）、常量区（Constant）和代码区（Code）。这些区域在内存中按照地址从高到低的顺序排列。
>
> 1. ‌**栈区（Stack）**‌：
>    - ‌**特点**‌：栈区用于存放函数的局部变量和参数，由系统自动管理内存，函数调用时分配空间，函数结束时回收空间。栈是从高地址向低地址扩展的连续内存区域，遵循先进后出（FILO）原则，效率高‌。
>    - ‌**用途**‌：主要用于存储函数的局部变量、参数和返回值等‌。
> 2. ‌**堆区（Heap）**‌：
>    - ‌**特点**‌：堆区用于存放动态分配的内存，大小不固定，可以动态扩张或缩减。堆区的内存需要通过指针访问，由程序员手动管理‌。
>    - ‌**用途**‌：用于存储通过`malloc`、`new`等函数动态分配的对象和大型数据结构‌。
> 3. ‌**全局静态区（BSS/数据段）**‌：
>    - ‌**特点**‌：分为==已初始化和未初始化==数据区。未初始化的全局变量和静态变量存放在BSS区，已初始化的存放在数据段。程序结束后由系统释放‌。
>    - ‌**用途**‌：用于存储全局变量和静态变量‌。
> 4. ‌**常量区**‌：
>    - ‌**特点**‌：用于存储常量，不允许修改。常量区的内存一旦分配就不会改变‌。
>    - ‌**用途**‌：存储程序中不变的常量值‌。
> 5. ‌**代码区**‌：
>    - ‌**特点**‌：存放程序的代码。代码区的内容在程序运行时不会改变‌。
>    - ‌**用途**‌：存储程序的机器代码‌。



### 虚拟内存

[好：虚拟内存 、分段、分页的理解](https://www.cnblogs.com/myseries/p/12487211.html)   [虚拟内存](https://www.cnblogs.com/icmzn/p/11824802.html)		[浅谈进程地址空间与虚拟存储空间](https://blog.csdn.net/yexiangCSDN/article/details/85002921)	[分段分页](https://cn.bing.com/search?q=%E5%9C%A8%E6%97%A9%E6%9C%9F%E7%9A%84%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%AD%2C%E8%A6%81%E8%BF%90%E8%A1%8C%E4%B8%80%E4%B8%AA%E7%A8%8B%E5%BA%8F%2C%E4%BC%9A%E6%8A%8A%E8%BF%99%E4%BA%9B%E7%A8%8B%E5%BA%8F%E5%85%A8%E9%83%BD%E8%A3%85%E5%85%A5%E5%86%85%E5%AD%98%2C%E7%A8%8B%E5%BA%8F%E9%83%BD%E6%98%AF%E7%9B%B4%E6%8E%A5%E8%BF%90%E8%A1%8C%E5%9C%A8&form=QBLHCN&sp=-1&lq=0&pq=%E5%9C%A8%E6%97%A9%E6%9C%9F%E7%9A%84%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%AD%2C%E8%A6%81%E8%BF%90%E8%A1%8C%E4%B8%80%E4%B8%AA%E7%A8%8B%E5%BA%8F%2C%E4%BC%9A%E6%8A%8A%E8%BF%99%E4%BA%9B%E7%A8%8B%E5%BA%8F%E5%85%A8%E9%83%BD%E8%A3%85%E5%85%A5%E5%86%85%E5%AD%98%2C%E7%A8%8B%E5%BA%8F%E9%83%BD%E6%98%AF%E7%9B%B4%E6%8E%A5%E8%BF%90%E8%A1%8C%E5%9C%A8&sc=0-39&qs=n&sk=&ghsh=0&ghacc=0&ghpl=)	[进程虚拟地址为什么是4G大小](https://blog.csdn.net/HQ354974212/article/details/83097967)    [64KB禁入区_百度搜索](https://www.baidu.com/s?ie=UTF-8&wd=64KB%E7%A6%81%E5%85%A5%E5%8C%BA)	[虚拟内存以及进程的虚拟内存分布](https://blog.csdn.net/u012138730/article/details/90273751)	

[操作系统分配虚拟内存 ](https://segmentfault.com/a/1190000044344317)	[为每个进程分配4G虚拟内存空间_百度搜索](https://www.baidu.com/s?ie=UTF-8&wd=%E4%B8%BA%E6%AF%8F%E4%B8%AA%E8%BF%9B%E7%A8%8B%E5%88%86%E9%85%8D4G%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98%E7%A9%BA%E9%97%B4)	

[地址空间分页_百度搜索](https://www.baidu.com/s?ie=utf-8&f=8&rsv_bp=1&tn=baidu&wd=%E5%9C%B0%E5%9D%80%E7%A9%BA%E9%97%B4%E5%88%86%E9%A1%B5&oq=%25E5%259C%25B0%25E5%259D%2580%25E7%25A9%25BA%25E9%2597%25B4%25E5%2588%2586%25E6%2588%2590%25E8%25AE%25B8%25E5%25A4%259A%25E7%259A%2584%25E9%25A1%25B5&rsv_pq=8a017268000d64ca&rsv_t=36ebMxks9emDq6iZshYE72qV1xoOdUcsjWreRrVSb9Aeb0y8xRMy2V%2FZw9o&rqlang=cn&rsv_enter=1&rsv_dl=tb&rsv_sug3=1&rsv_sug1=1&rsv_sug7=100&bs=%E5%9C%B0%E5%9D%80%E7%A9%BA%E9%97%B4%E5%88%86%E6%88%90%E8%AE%B8%E5%A4%9A%E7%9A%84%E9%A1%B5)	

[linux的虚拟内存是4G，而每个进程都有自己独立的4G内存空间，怎么理解？](https://www.cnblogs.com/xuan52rock/p/7245366.html)	[计算机系统构成及原理 - 知乎](https://zhuanlan.zhihu.com/p/592365255)	

- 64K禁入区的作用很明显是隔离了用户和内核空间；防止用户程序跨越到内核空间中。与内核交互会涉及到[SSDT](https://link.zhihu.com/?target=http%3A//www.baidu.com/link%3Furl%3DAIA5yF7rY-tBF_ncT9XOb3CrJsgCY7dET11iDJj9cCAwIA_iIRriBTkaG-5hh08jI6Ot96B2CqwXnB06J4CpqH_3uZbTO6ZkiRb1VdJjnkO)表

| ![](./硬件知识.assets/0-1739630548896-145.webp) | ![](./硬件知识.assets/2-1739630548896-146.webp) |
| ----------------------------------------------- | ----------------------------------------------- |
| ![](./硬件知识.assets/3-1739630548896-147.webp) | ![]()                                           |

### ==分段和分页==

> 分段管理虽然减少了内存碎片，但是减少的还是不够多，为了合理的使用内存的空间，进一步减少内存碎片问题，引入分页机制。
>
> 把内存分为固定大小的分区，程序也被切成固定大小分区；内存固定大小的分区，我们叫==页框==，也是帧frames，而程序的固定大小分区我们成为==页面==，也是pages；很明显：页框的大小等于页面的大小
>
> 
>
> 因为页面都是固定大小的，只有最后一个页面才不是固定大小的， 所以内存碎片很少、可控
>
> 假设固定大小为4kb，而程序39kb大小，那么分10个页面，只有第10个页面的大小为3kb，其他页面的大小都是4kb;当把程序的每个页面都放进内存的页框中，只有第10个页面是占页框的3kb，页框就会剩下1kb，这也是内部碎片的产生。



**早期的内存分配方法问题**：  

1. 进程==地址空间不隔离== : ==分段解决问题1 和 3==
   1. 程序直接访问物理内存，所以恶意`程序可以修改别的进程的内存数据`
   2. 分段: 增加中间层, 程序访问的内存地址不再是实际的物理内存地址，而是`虚拟地址`, OS 将虚拟地址映射到适当的物理内存地址上,  实现内存地址空间隔离， 解决了`进程地址空间隔离`的问题
2. 内存==使用效率低==
   1. 程序运行内存不够时， 系统必须在已运行的程序中选择一个，将该程序的数据暂时拷贝到硬盘上，释放出部分空间来供程序C使用，再将程序C的数据全部装入内存中运行，有`大量数据装入装出`，效率低
3. 程序==运行的地址不确定==
   1. 系统会在内存剩余空间中随机分配一段连续空间给程序C使用，因为是`随机分配`的，所以程序运行的地址是不确定的

#### 分段：虚拟地址

- 32位操作系统为每个进程分配`4GB`虚拟地址空间，源于32位指针的寻址能力。一个指针长度 4 字节 （32位）， ==2的32次方地址寻址能力==是从 `0x00000000 ~ 0xFFFFFFFF` 即为 `4GB` 大小的容量
- 这4G并非全供用户使用，通常内核占用一部分，剩余供用户进程使用。在Windows下，用户进程可用2G，线程栈限制导致最大线程数约2000个；而在Linux下，用户可用`3G`，线程栈大小不同，限制线程数在380个左右。地址空间还包括栈、堆、数据段和代码段等不同区域，实现进程间地址隔离和资源管理。          

1. 创建进程时，操作系统为该进程分配一个`4GB`大小的虚拟进程地址空间,  进程创建时，每个进程都会有一个自己的4GB虚拟地址空间； 
2. ==虚拟地址与物理地址间建立映射关系==。 这样，通过映射机制，当程序访问虚拟地址空间上的某个地址值时，就相当于访问了物理地址空间中的另一个值。 用==分段==方法，它的思想是在虚拟地址空间和物理地址空间之间做一一映射。 比如说`虚拟地址空间中某个10M大小的空间`映射到物理地址空间中某个10M大小的空间。 
   1. 操作系统保证`不同进程的地址空间`被映射到物理地址空间中不同的区域上，这样每个进程最终访问到的物理地址空间都是彼此分开的。 通过这种方式，就实现了进程间的地址隔离
   2. 从应用程序的角度看来，进程A的地址空间就是分布在0x00000000到0x00A00000，在做开发时，开发人员只需访问这段区间上的地址即可。`应用程序并不关心进程A映射到物理内存的那块区域`上了，所以==程序的运行地址==也就是相当于说==是确定的==了。



| ![早期内存分配机制](./硬件知识.assets/Snipaste_2025-02-06_11-07-11-1739630548896-148.jpg) | ![分段方式的内存映射方法](./硬件知识.assets/Snipaste_2025-02-06_11-07-57-1739630548897-149.jpg) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |

#### 分页

映射，粒度比较大。实际上，==程序的运行有局部性==特点，在某个时间段内，程序只是访问程序的一小部分数据，也就是说，程序的大部分数据在一个时间段内都不会被用到。 基于这种情况，人们想到了==粒度更小的内存分割和映射方法==，这种方法就是分页

- 分页的基本方法是，将地址空间分成许多的页。每`页的大小`由CPU决定，然后由操作系统选择页的大小。
- 目前Inter系列的CPU支持`4KB`或4MB的页大小，而PC上目前都选择使用4KB。按这种选择，4GB虚拟地址空间共可以分成1048576个页，512M的物理内存可以分为131072个页。显然虚拟空间的页数要比物理空间的页数多得多。

**可执行文件PE的装载过程**来说明分页机制的实现方法:

1. 先为程序==创建4GB==的进程虚拟地址空间,  并不是真的创建空间，只是创建`映射机制所需要的数据结构`而已，这种数据结构就是页目和页表
2. 创建完虚拟地址空间所需要的数据结构后，进程开始读取PE文件的第一页, 第一页包含`PE文件头和段表等`
   1. 进程`根据文件头和段表`等信息，将==PE文件==中所有的==段映射到虚拟地址空间中相应的页==(PE文件中的段的长度都是页长的整数倍),  建立PE文件和进程虚拟地址空间中页的映射关系
3. CPU要访问程序中用到的虚拟地址时，当CPU发现该地址并没有相关联的物理地址时，CPU认为该虚拟地址所在的页面是个空页面，CPU会认为这是个页错误(Page Fault)，CPU也就知道了操作系统还未给该PE页面分配内存，CPU将控制权交给操作系统
   1. 操作系统为该PE页面`在物理空间中分配一个页面`，然后==再将物理页面与虚拟页面映射==起来，然后将控制权再还给进程，进程从刚才发生页错误的位置重新开始执行。由于此时已为PE文件的那个页面分配了内存，所以就不会发生页错误了
   2. 随着程序的执行，页错误会不断地产生，操作系统也会为进程分配相应的物理页面来满足进程执行的需求
4. 分页方法的核心思想就是当可执行文件`执行到第x页`时，就为`第x页分配一个内存页y`，然后再将这个内存页添加到进程虚拟地址空间的映射表中,这个映射表就相当于一个y=f(x)函数。应用程序通过映射表就可以访问到x页关联的y页了

##### 页目录和页表

虚拟地址转换成物理地址的信息存放在页目录和页表里

- 物理内存分页，一个物理页的大小为4K字节，第0个物理页从物理地址 0x00000000 处开始。由于页的大小为4KB，就是0x1000字节，所以第1页从物理地址 0x00001000 处开始。第2页从物理地址 0x00002000 处开始。可以看到由于页的大小是4KB，所以只需要32bit的地址中高20bit来寻址物理页
- 页表，一个页表的大小为4K字节，放在一个物理页中。由1024个4字节的页表项组成。页表项的大小为4个字节(32bit)，所以一个页表中有1024 个页表项。页表中的每一项的内容（每项4个字节,32bit）高20bit用来放一个物理页的物理地址，低12bit放着一些标志
- 页目录，一个页目录大小为4K字节，放在一个物理页中。由1024个4字节的页目录项组成。页目录项的大小为4个字节(32bit)，所以一个页目录中有 1024个页目录项。页目录中的每一项的内容（每项4个字节）高20bit用来放一个页表（页表放在一个物理页中）的物理地址，低12bit放着一些标志。

**虚拟地址**4个字节(32bit)， 分为3个部分：

1. 第22位到第`31`位这10位（最高10位）是==页目录中的索引==
2. 第12位到第`21`位这10位是==页表中的索引==
3. 第0位到第`11`位这12位（低12位）是==页内偏移==

x86系统，页目录的物理地址放在CPU的CR3寄存器中

##### **虚拟地址转物理地址**

1. CPU首先根据CR3 中的值，找到`页目录`所在的物理页
2. 然后根据虚拟地址的第22位到第31位这10位（最高的10bit)的值作为索引，==找到相应的页目录项== (PDE,page directory entry),  `页目录项中有`这个虚拟地址所对应`页表的物理地址`
3. 有了`页表的物理地址`，根据虚拟地址的第12位到第21位这10位的值作为索引，==找到该页表中相应的页表项==(PTE,page table entry),页表项中就有这个虚拟地址所对应`物理页的物理地址`
4. 最后用虚拟地址的最低12位，也就是==页内偏移，加上物理页的物理地址==，就得到了该虚拟地址所对应的物理地址。

一个页目录有1024项，虚拟地址最高的10bit刚好可以索引1024项（2的10次方等于1024）。一个页表也有1024项，虚拟地址中间部分的 10bit，刚好索引1024项。虚拟地址最低的12bit（2的12次方等于4096），作为页内偏移，刚好可以索引4KB，也就是一个物理页中的每个字节

> 虚拟地址转换成物理地址的计算过程就是，处理器通过CR3找到当前页目录所在物理页，取虚拟地址的高10bit,然后把这10bit右移2bit（因 为每个页目录项4个字节长，右移2bit相当于乘4）得到在该页中的地址，取出该地址处PDE（4个字节），就找到了该虚拟地址对应页表所在物理页，取虚 拟地址第12位到第21位这10位，然后把这10bit右移2bit（因为每个页表项4个字节长，右移2bit相当于乘4）得到在该页中的地址，取出该地 址处的PTE（4个字节），就找到了该虚拟地址对应物理页的地址，最后加上12bit的页内偏移得到了物理地址。

[虚拟空间和页表段表](https://www.cnblogs.com/wangccc/p/5342300.html)	 

`32bit的一个指针，可以寻址范围0x00000000-0xFFFFFFFF,4GB大小。也就是说一个32bit的指针可以寻址整个4GB地址空间 的每一个字节。`

`一个页表项负责4K的地址空间和物理内存的映射，一个页表1024项，也就是负责1024*4k=4M的地址空间的映射。`

`一个页目录项，对 应一个页表。一个页目录有1024项，也就对应着1024个页表，每个页表负责4M地址空间的映射。1024个页表负责1024*4M=4G的地址空间映 射。`

`一个进程有一个页目录。所以以页为单位，页目录和页表可以保证4G的地址空间中的每页和物理内存的映射。`



[操作系统 存储管理概述](https://blog.csdn.net/GarfieldGCat/article/details/89792860)   [搜索](https://cn.bing.com/search?q=%E5%BD%93%E6%88%91%E5%9C%A8%E5%AD%A6%E4%B9%A0%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%AD%98%E5%82%A8%E5%99%A8%E7%AE%A1%E7%90%86%E8%BF%99%E4%B8%80%E7%AB%A0%E4%B8%AD%E7%9A%84%E5%88%86%E9%A1%B5%E5%AD%98%E5%82%A8%E6%97%B6%E5%8F%91%E7%8E%B0%E6%88%91%E6%80%BB%E6%98%AF%E5%B0%86%E8%AE%B8%E5%A4%9A%E6%A6%82%E5%BF%B5%E6%B7%B7%E4%B8%BA%E4%B8%80%E8%B0%88%EF%BC%8C%E5%BD%93%E6%88%91%E6%B1%82%E5%8A%A9%E4%BA%8ECSDN%E7%AD%89%E4%BC%97%E5%A4%9A%E7%BD%91%E7%AB%99%E7%9A%84%E8%B5%84%E6%BA%90%E6%97%B6%E5%8F%91%E7%8E%B0%E5%85%B6%E4%B8%AD%E7%9A%84%E6%A6%82%E5%BF%B5%E4%BD%9C%E8%80%85%E5%86%99%E7%9A%84%E5%8D%81%E5%88%86%E6%B8%85%E6%99%B0%E4%BD%86%E7%AF%87%E5%B9%85%E8%BE%83%E9%95%BF%E9%9A%BE%E4%BB%A5%E7%90%86%E8%A7%A3%EF%BC%8C%E5%9B%A0%E6%AD%A4%E6%88%91%E6%83%B3%E7%94%A8%E8%87%AA%E5%B7%B1%E7%9A%84%E7%90%86%E8%A7%A3%E7%94%A8%E6%9B%B4%E5%8A%A0%E7%AE%80%E6%B4%81%E6%98%8E%E4%BA%86%E7%9A%84%E8%AF%9D%E8%AF%AD%E5%B8%AE%E5%8A%A9%E6%9B%B4%E5%A4%9A%E5%9B%B0%E6%89%B0%E4%BA%8E%E5%88%86%E9%A1%B5%E5%AD%98%E5%82%A8%E7%B3%BB%E7%BB%9F%E6%A6%82%E5%BF%B5%E7%9A%84%E4%BA%BA%E5%91%98&form=QBLHCN&sp=-1&lq=0&pq=&sc=18-0&qs=n&sk=&ghsh=0&ghacc=0&ghpl=)	  [分页和分段的联系和区别](https://cloud.tencent.com/developer/article/1344772)		[分页、分段、虚拟存储_虚拟内存分页](https://blog.csdn.net/qq_62835094/article/details/138411201)	 [Linux分页机制](https://zhuanlan.zhihu.com/p/578536969)	 [操作系统之内存管理 ( 虚拟内存，页面置换算法，分段等)](https://baijiahao.baidu.com/s?id=1717508522984565904&wfr=spider&for=pc)	

==逻辑地址==也称为相对地址、程序地址、虚拟地址,   逻辑地址转换为主存物理地址（绝对地址）的过程就是==地址重定位==, 分为两类

1. 静态重定位
   1. 早期用： 程序装入主存时就完成逻辑地址到物理地址的转换，且**程序执行期间不会发生变化**
2. 动态重定位
   1. 程序运行时完成逻辑地址与物理地址的转换





[格式化中的分配单元大小是分页吗_百度搜索](https://www.baidu.com/s?ie=UTF-8&wd=%E6%A0%BC%E5%BC%8F%E5%8C%96%E4%B8%AD%E7%9A%84%E5%88%86%E9%85%8D%E5%8D%95%E5%85%83%E5%A4%A7%E5%B0%8F%E6%98%AF%E5%88%86%E9%A1%B5%E5%90%97)	[格式化时分配单元大小](https://www.zhihu.com/question/313510428/answer/691062695)	

**格式化中的分配单元大小并不是分页**‌。分配单元大小是指分区中的“簇”，簇是分区的最小存储单元，而页是固态硬盘存储管理中的最小存储单元‌

- 设置得大，虽然可以提高读写效率，但可能会导致空间浪费
- 设置得小，虽然空间利用率高，但可能会降低读写速度‌;   大文件会写入多个不同的簇，那么写入和读取文件时，就必须先后找到对应的簇进行读取（寻道操作），而寻道最花费时间，从而降低读写速度

内存管理单元（MMU）管理着地址空间和物理内存的转换

| ![](./硬件知识.assets/Snipaste_2025-01-16_00-16-55-1739630548897-150.jpg) | ![](./硬件知识.assets/Snipaste_2025-01-16_00-17-21-1739630548897-151.jpg) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |



### ==分段机制与分页机制对地址进行转换==

[(操作系统中内存管理分页和分段？](https://www.zhihu.com/question/50796850/answer/2979142696)	 [段页式存储管理](https://blog.csdn.net/saber520___/article/details/132921668)	[操作系统采用分段机制与分页机制_百度搜索](https://www.baidu.com/s?ie=utf-8&f=8&rsv_bp=1&tn=baidu&wd=%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E9%87%87%E7%94%A8%E5%88%86%E6%AE%B5%E6%9C%BA%E5%88%B6%E4%B8%8E%E5%88%86%E9%A1%B5%E6%9C%BA%E5%88%B6&oq=%25E9%2587%2587%25E7%2594%25A8%25E5%2588%2586%25E6%25AE%25B5%25E6%259C%25BA%25E5%2588%25B6%25E4%25B8%258E%25E5%2588%2586%25E9%25A1%25B5%25E6%259C%25BA%25E5%2588%25B6&rsv_pq=867821320016f46f&rsv_t=444f%2FS4gHghDE%2FJLPGfToBXCt8L72tNWtHLEsfvskgJcETfEqBe5cQiY%2B7Y&rqlang=cn&rsv_enter=1&rsv_dl=tb&rsv_sug3=11&rsv_sug1=6&rsv_sug7=100&bs=%E9%87%87%E7%94%A8%E5%88%86%E6%AE%B5%E6%9C%BA%E5%88%B6%E4%B8%8E%E5%88%86%E9%A1%B5%E6%9C%BA%E5%88%B6)	[内存虚拟化之分段、分页、段页机制 - 知乎](https://zhuanlan.zhihu.com/p/602983823)	[采用分段机制与分页机制_百度搜索](https://www.baidu.com/s?ie=UTF-8&wd=%E9%87%87%E7%94%A8%E5%88%86%E6%AE%B5%E6%9C%BA%E5%88%B6%E4%B8%8E%E5%88%86%E9%A1%B5%E6%9C%BA%E5%88%B6)	

[GDT还是LDT_百度搜索](https://www.baidu.com/s?ie=UTF-8&wd=GDT%E8%BF%98%E6%98%AFLDT)	

[GDT、GDTR、LDT、LDTR的关系](https://blog.51cto.com/u_13128132/6096305)	 [Linux 内存管理之GDT与LDT](https://blog.csdn.net/Teminator_/article/details/140520464)	[GDT和 LDT](https://blog.csdn.net/lizongti/article/details/138668202)	 [GDT,LDT,GDTR,LDTR 详解](https://cloud.tencent.com/developer/article/1470220)	 [GDT、LDT、GDTR、LDTR、段寄存器一图流 ](https://www.cnblogs.com/shiqi17/p/12667236.html) [操作系统L2-对GDT和LDT的理解](http://www.360doc.com/content/24/0215/14/277688_1114114572.shtml)	[保护模式下三个重要的系统表——GDT、LDT和IDT](https://wenku.baidu.com/view/5e98c9557b3e0912a21614791711cc7931b778b3.html?_wkts_=1731323471044)	 	

‌==GDT==（Global Descriptor Table）和==LDT==（Local Descriptor Table）在x86架构中用于定义内存段的属性和访问权限，它们的主要区别在于作用域和使用方式 

- GDT:全局描述符表;  **LDT**‌：局部描述符表 

[逻辑地址如何转为物理地址_百度搜索](https://www.baidu.com/s?ie=UTF-8&wd=%E9%80%BB%E8%BE%91%E5%9C%B0%E5%9D%80%E5%A6%82%E4%BD%95%E8%BD%AC%E4%B8%BA%E7%89%A9%E7%90%86%E5%9C%B0%E5%9D%80)	  [Linux内存寻址之分段机制及分页机制](https://zhuanlan.zhihu.com/p/477153141)	

逻辑地址如何转换为物理地址:  [操作系统之存储器管理](https://cloud.tencent.com/developer/article/1960668)  [页面置换求物理地址](https://www.bilibili.com/video/BV1M84y1B7o3/?vd_source=7346303e5e18677d7261c2c0c109ecfd)  [ 逻辑地址和物理地址如何转换？](https://www.zhihu.com/question/364683302/answer/973328362)	[逻辑地址转化物理地址 ](https://www.cnblogs.com/2sheep2simple/p/10233762.html)	[逻辑地址与物理地址的转换](https://blog.csdn.net/qq_52395989/article/details/125344677)	



- 分段地址与分页地址转换   
  - x86平台下的系统采用==分段机制与分页机制对地址进行转换==，其中分段机制把一个虚拟地址转换成线性地址；接着，分页机制把一个线性地址转换成物理地址。
  - **虚拟地址**：就是==程序中写的地址==，如char *p = malloc(2)，p表示的就是虚拟地址
    - 我的理解：程序是代码，里面的地址当然是虚拟的，代码映射到内存
    - 程序能断言某个地址在其自己的`进程空间 或 地址空间`内
  - **逻辑地址**：==程序在执行时，传递给CPU的地址==是逻辑地址，它由两部分组成，一部分是`段选择符`（比如cs和ds等段寄存器的值）， 另一部分为有效地址（即`偏移量`，比如eip寄存器的值）
    - ==逻辑地址==必须==经过映射转换变为线性地址==， 线性地址再经过一次映射转为物理地址，才能访问真正的物理内存。转化过程如下：
    - **线性地址**：==虚拟地址经过分段处理之后的地址成为线性地址==，段式映射
      - 逻辑地址转化为线性地址
      - **逻辑地址是以"段寄存器:偏移地址"形式存在**  
      - **线性地址分为三部分：页目录索引，页表索引，和字节偏移索引**
        - 通过页目录索引和CR3寄存器指定的页目录基址之和，可以查询到对应的页表基址
        - 再通过页表索引和页表基址之和， 可以得到对应的页框地址
        - 页框地址再加上页内字节偏移，就最终获得了对应的物理地址

    - **物理地址**：==线性地址经过分页之后的地址为物理地址==


| ![程序由函数和数据结构组成](./硬件知识.assets/mem-1739630548897-152.jpg) | ![](./硬件知识.assets/Snipaste_2024-11-10_23-01-09-1739630548897-153.jpg) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| ![](./硬件知识.assets/Snipaste_2024-11-11_17-38-21-1739630548898-154.jpg) | ![](./硬件知识.assets/Snipaste_2024-11-11_19-17-03-1739630548898-155.jpg) |
| ![](./硬件知识.assets/Snipaste_2024-11-11_19-18-53-1739630548898-156.jpg) | ![分段机制与分页机制对地址进行转换](./硬件知识.assets/Snipaste_2024-11-11_19-40-53-1739630548898-157.jpg) |



## CE修改

[外挂编程技术揭秘-找游戏基地址](https://zhuanlan.zhihu.com/p/625618336)	 

# 主板

[DMA控制器](https://www.eefocus.com/baike/1562752.html) [DMA控制器_百度搜索](https://www.baidu.com/s?ie=UTF-8&wd=DMA%E6%8E%A7%E5%88%B6%E5%99%A8)		[DMA控制器解析](https://blog.csdn.net/weixin_44586750/article/details/91483513)	[DMA控制器在主板什么位置_百度搜索](https://www.baidu.com/s?ie=utf-8&f=8&rsv_bp=1&tn=baidu&wd=DMA%E6%8E%A7%E5%88%B6%E5%99%A8%E5%9C%A8%E4%B8%BB%E6%9D%BF%E4%BB%80%E4%B9%88%E4%BD%8D%E7%BD%AE&oq=DMA%25E6%258E%25A7%25E5%2588%25B6%25E5%2599%25A8&rsv_pq=94108bd40011d043&rsv_t=c4892kBlrutPWlzguXufEgTrABpITa%2Blvovt8Rxa5k9WZwRWEHckSU8iDIo&rqlang=cn&rsv_enter=1&rsv_dl=tb&rsv_sug3=20&rsv_sug1=15&rsv_sug7=100&rsv_sug2=0&rsv_btype=t&inputT=11300&rsv_sug4=11301)   

[主板还有南桥吗_百度搜索](https://www.baidu.com/s?ie=utf-8&f=8&rsv_bp=1&tn=baidu&wd=%E4%B8%BB%E6%9D%BF%E8%BF%98%E6%9C%89%E5%8D%97%E6%A1%A5%E5%90%97&oq=DMA%25E6%258E%25A7%25E5%2588%25B6%25E5%2599%25A8%25E5%259C%25A8%25E4%25B8%25BB%25E6%259D%25BF%25E4%25BB%2580%25E4%25B9%2588%25E4%25BD%258D%25E7%25BD%25AE&rsv_pq=f409edc90007afc8&rsv_t=9d0bYWKYdrhjGEPYCUX8%2Bee6iAMEFLc41RcnUQX%2BWVj3lQgoZU7Hbu2rQxw&rqlang=cn&rsv_enter=1&rsv_dl=tb&rsv_btype=t&inputT=11300&rsv_sug3=37&rsv_sug1=26&rsv_sug7=100&sug=%25E4%25B8%25BB%25E6%259D%25BF%25E8%25BF%2598%25E6%259C%2589%25E5%258D%2597%25E6%25A1%25A5%25E5%2590%2597&rsv_n=1&bs=DMA%E6%8E%A7%E5%88%B6%E5%99%A8%E5%9C%A8%E4%B8%BB%E6%9D%BF%E4%BB%80%E4%B9%88%E4%BD%8D%E7%BD%AE)   [主板北桥作用_百度搜索](https://www.baidu.com/s?ie=utf-8&f=8&rsv_bp=1&tn=baidu&wd=%E4%B8%BB%E6%9D%BF%E5%8C%97%E6%A1%A5%E4%BD%9C%E7%94%A8&oq=%25E4%25B8%25BB%25E6%259D%25BF%25E8%25BF%2598%25E6%259C%2589%25E5%258D%2597%25E6%25A1%25A5%25E5%2590%2597&rsv_pq=fd69d55c001f4386&rsv_t=5480zs6hkiluH0Qr013VQUUCNsXmjMPrNqbSZdwVNg%2F4886l1jCPhalWdXU&rqlang=cn&rsv_enter=1&rsv_dl=tb&rsv_btype=t&inputT=9035&rsv_sug3=60&rsv_sug1=43&rsv_sug7=100&rsv_sug2=0&rsv_sug4=10209)	

[为什么现在主板上芯片组越来越少了，原来我们熟知的北桥去哪里了？](https://www.163.com/dy/article/JHB8BMN00553TKK8.html)

​	 

- DMA控制器：  (Direct Memory Access Controller)是一种用于数据传输的硬件设备,它能够在计算机系统中实现直接的内存与外设之间的数据传输,而不需要CPU的干预;  `用DMA方式实现外设和存储器之间的数据高速传输`;  通常集成在主板的南桥芯片
- 南桥芯片:  主要负责==处理低速信号==和I/O设备的控制
  - 如PCI总线、USB、LAN、ATA、SATA、音频控制器、键盘控制器、实时时钟控制器、高级电源管理等
- [北桥芯片](https://www.baidu.com/s?wd=北桥芯片&usm=2&ie=utf-8&rsv_pq=9afacdf1000000ff&oq=主板北桥作用&rsv_t=2d390Z%2BXXLOuuHIAleYczV1JTEIGDK1On4sscvcxWLCDPYhH2RdIIeGtCh4&rsv_dl=re_dqa_generate&sa=re_dqa_generate) : 主要负责协调[CPU](https://www.baidu.com/s?wd=CPU&usm=2&ie=utf-8&rsv_pq=9afacdf1000000ff&oq=主板北桥作用&rsv_t=2071UdNzZxOmuKICoAV%2FvfnKS%2BLUAuOLiDpk0DxBgeyPgzi9sjD9Y5jch6M&rsv_dl=re_dqa_generate&sa=re_dqa_generate)、内存等设备的工作，并与[南桥芯片](https://www.baidu.com/s?wd=南桥芯片&usm=2&ie=utf-8&rsv_pq=9afacdf1000000ff&oq=主板北桥作用&rsv_t=2071UdNzZxOmuKICoAV%2FvfnKS%2BLUAuOLiDpk0DxBgeyPgzi9sjD9Y5jch6M&rsv_dl=re_dqa_generate&sa=re_dqa_generate)进行数据交换 ; 主要负责==处理高速信号==，如CPU、内存、AGP端口或[PCI Express](https://www.baidu.com/s?wd=PCI Express&usm=2&ie=utf-8&rsv_pq=9afacdf1000000ff&oq=主板北桥作用&rsv_t=4f03HQ3%2F796ifFtasWaQaA6SttzpgdptBy9wbHAOcrKJ1EinRofP%2Bnqu4e4&rsv_dl=re_dqa_generate&sa=re_dqa_generate)之间的通信 
  - 现在 ==内存控制器、PCI-E控制器==等北桥芯片组的大部分功能都集成到CPU里

**北桥芯片**的主要功能包括：

1. ‌**控制内存**‌：北桥芯片负责与CPU的联系，并控制内存、AGP、PCI数据在北桥内部传输。
2. ‌**数据交换**‌：北桥芯片与处理器之间的通信最密切，主要负责控制AGP显卡、内存与CPU之间的数据交换。
3. ‌**高速信号处理**‌：北桥芯片处理高速信号，支持CPU的类型和主频、系统的前端总线频率、内存的类型和最大容量等。

# 单片机

[目前见过的最强开发板，性能已经达到手机主流水平](https://www.bilibili.com/video/BV17A6zY1E1Y/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	

[DSO138数字存储示波器](https://blog.csdn.net/csdn_rp/article/details/122641040)	

[西门子wincc8.0](https://www.bilibili.com/video/BV1vrBFYbEK4/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	

# 光纤组网

[数通工程师必备丨中大型企业防火墙IPsec VPN高可用实战案例](https://www.bilibili.com/video/BV1tNkFYZE2D/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	 [发明光纤的人真是个天才，它的出现改变了一个时代](https://www.bilibili.com/video/BV1WZ6gYLEtW/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	

## 光纤熔接

[光纤扎手可能进入血管流到心脏](https://www.zhihu.com/question/432055219)	

科学计数法： ==e+==代表科学计数法中的指数部分，即10的幂。例如，8.70222E+11表示8.70222乘以10的11次方   [光模块10ge和ge的区别](https://www.sicoya.cn/baike/240.html)	 [万兆光猫](https://item.taobao.com/item.htm?abbucket=19&id=767587861084&ns=1&pisk=f6rxLww2Q_f0539JyF_osUMN4GWoHleViSyBjfcD57F8CbxG3mbZX5h8_j0mcjxtXRFas5eN3AG_15hgoaj33-oZf6qOxM2VgssUOSHsfb6sKAT1Dgblh-oZf6vkfwjL3WMfLZMjCY6-IAHXG5gbFUMINATjf5GSPvMHGcNsfTnS3vOXGjGsNbMINIT6cx9WNxknhfts1TeSaAMKS1hWhfxTS-oA--OMI3t72YGZO-CkbYZjH4GLhFxvDOkxkXwjN6cJm_g7QVEwQhhbhyPZdSOfaf43Eog-XwAZ6P2bmonwQUe-Wo4ZWoWBTXUbeln0M6LZOr2SVjzfsEGb0Jm854Bfc8nxMWrbMMC7O2E07VEVdBlLl8EtmoBMuxz7g0Hzj_-j6za_mqowG_lg-8qjyDsrMkqpjWdnU0LfeTLw7qMrmJIxxeatAgk-ttI97FuPUYhheTLw7qMreXXApF8ZzT5..&priceTId=215040bf17317809680901277ed077&skuId=5645586912725&xxc=taobaoSearch)	 

`1GB（千兆字节）= 1024MB = 1024 * 1024 * 1024 * 8b = 8.59e+9` ,一秒传输85亿个0或1

[一文了解光纤配线架、光纤跳线、耦合器、收发器及光纤色谱顺序](https://www.sohu.com/a/392168056_785837)  [光纤](https://www.ruidan.com/infomation/detail/148032)		 [如何计算光纤配线架、耦合器、光纤跳线等的数量及计算方法](https://www.elecfans.com/d/2446472.html) [光纤](https://blog.csdn.net/weixin_39831039/article/details/109885480?spm=1001.2101.3001.6650.14&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7Ebaidujs_baidulandingword%7ECtr-14-109885480-blog-135206558.235%5Ev43%5Epc_blog_bottom_relevance_base1&utm_relevant_index=15)	

跳线颜色：[多模光纤OM1~OM5五个标准的光缆](https://www.bilibili.com/video/BV1Bh4y1k7T8/?vd_source=7346303e5e18677d7261c2c0c109ecfd) [光纤的排列顺序](https://www.bilibili.com/video/BV1R24y137Eg/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	 [光纤为什么要排列顺序_百度搜索](https://www.baidu.com/s?ie=utf-8&f=8&rsv_bp=1&tn=baidu&wd=%E5%85%89%E7%BA%A4%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E6%8E%92%E5%88%97%E9%A1%BA%E5%BA%8F&oq=%25E5%2585%2589%25E7%25BA%25A4%25E7%259A%2584%25E6%258E%2592%25E5%2588%2597%25E9%25A1%25BA%25E5%25BA%258F&rsv_pq=bde66d8200132893&rsv_t=e04fYC7yet%2Fnfud%2BRzgJ0NYlm3VB3eBawwmFdjG2kRMdswZvaGZ%2FCCbq6gg&rqlang=cn&rsv_enter=1&rsv_dl=tb&rsv_sug3=13&rsv_sug1=6&rsv_sug7=100&bs=%E5%85%89%E7%BA%A4%E7%9A%84%E6%8E%92%E5%88%97%E9%A1%BA%E5%BA%8F)	[光缆是如何排序的](https://zhidao.baidu.com/question/2086845340588413308.html) [光纤通讯色谱](https://www.bilibili.com/video/BV1BX4y1h7re/?vd_source=7346303e5e18677d7261c2c0c109ecfd)		  	 	

接头：[SC、LC、FC光纤接口](https://www.bilibili.com/video/BV1Qt421b7nD/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	 [光纤法兰](https://www.bilibili.com/video/BV1Tn4y1d7k8/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	

单模多模：[多模光纤优点](https://www.bilibili.com/video/BV1ZX4y1E7Vh?spm_id_from=333.788.recommend_more_video.-1&vd_source=7346303e5e18677d7261c2c0c109ecfd)	   [单模光纤和多模光纤的区别](https://www.bilibili.com/video/BV1my411z7or?spm_id_from=333.788.recommend_more_video.10&vd_source=7346303e5e18677d7261c2c0c109ecfd) [单模光纤和多模光纤](https://www.bilibili.com/video/BV1Wu411E7g6?spm_id_from=player_end_recommend&vd_source=7346303e5e18677d7261c2c0c109ecfd) 	[多模光纤与单模光纤区别 ](https://wenku.baidu.com/view/41ee8a95a6c30c2258019e82.html?fr=aladdin664466&ind=2&aigcsid=0&qtype=0&lcid=2&queryKey=%E5%8D%95%E6%A8%A1%E5%85%89%E7%BA%A4%E5%92%8C%E5%A4%9A%E6%A8%A1%E5%85%89%E7%BA%A4%E7%9A%84%E5%8C%BA%E5%88%AB&verifyType=0&_wkts_=1731756659505)	

-  模：光传输的模式，多模纤芯50或62.5um ,头发75微米, 单模8-10um
- 多模光纤组网成本更低，大量用于机房或同一建筑内光纤组网

[ODF光纤配线架](https://blog.csdn.net/br360/article/details/135206558)	 [ODF VDF DDF MDF](https://wenku.csdn.net/answer/439a21a072694687a65d42e4ba0eb40d?spm=1001.2101.3001.6650.19&depth_1-utm_source=distribute.pc_relevant.none-task-chatgpt-2%7Edefault%7ECTRLIST%7EPosition-19-439a21a072694687a65d42e4ba0eb40d-blog-135206558.235%5Ev43%5Epc_blog_bottom_relevance_base1&utm_relevant_index=20)	 [ODF、DDF、MDF](https://openatomworkshop.csdn.net/6629d2481a836825ed7b9bc9.html?dp_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6MjIzOTc2MCwiZXhwIjoxNzMyMzU1MjYwLCJpYXQiOjE3MzE3NTA0NjAsInVzZXJuYW1lIjoibXl0dGlhbiJ9.FjFCgXDykXU5R4qQTdNMdTMV9xwK7Fxn4N7T2Xt3XRw&spm=1001.2101.3001.6650.17&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7Eactivity-17-106659555-blog-135206558.235%5Ev43%5Epc_blog_bottom_relevance_base1&utm_relevant_index=18)	 

[配线架和跳线架的区别_百度搜索](https://www.baidu.com/s?ie=utf-8&f=3&rsv_bp=1&tn=baidu&wd=%E9%85%8D%E7%BA%BF%E6%9E%B6%E5%92%8C%E8%B7%B3%E7%BA%BF%E6%9E%B6%E7%9A%84%E5%8C%BA%E5%88%AB&oq=%25E5%258F%258C%25E7%25BB%259E%25E7%25BA%25BF%25E9%2585%258D%25E7%25BA%25BF%25E6%259E%25B6&rsv_pq=fd400587000a436c&rsv_t=353apI76TIoL7h0MywiwISpiUBAX9NRo6MXTfBIFb7AsAkz%2B8oznVbrh4rM&rqlang=cn&rsv_enter=1&rsv_dl=ts_0&rsv_sug3=2&rsv_sug1=2&rsv_sug7=100&rsv_sug2=1&rsv_btype=t&prefixsug=%25E9%2585%258D%25E7%25BA%25BF%25E6%259E%25B6&rsp=0&inputT=2059&rsv_sug4=2445)	 [跳线架和配线架的区别](https://blog.csdn.net/weixin_39640444/article/details/109885468?spm=1001.2101.3001.6650.6&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7ECtr-6-109885468-blog-135206558.235%5Ev43%5Epc_blog_bottom_relevance_base1&utm_relevant_index=7)  

[光纤跳线和光纤尾纤](https://mbd.baidu.com/newspage/data/videolanding?nid=sv_4397619231422570403&sourceFrom=share)	 [光纤跳线和光纤尾纤](https://www.bilibili.com/video/BV1MA4y1D7mi/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	  

[光纤收发器上的fx代表什么意思](https://zhidao.baidu.com/question/467504774467672005.html) 	

工具： [米勒钳](https://b2b.baidu.com/q/aland?q=702B0602793706160E660763037B0A7D74190A1E091C0E666A76742B073F702B0602793706160E667C0D097D0933&id=qid03ae3cbf0739223a12b6005a84fff634&answer=7487864313787825725&utype=2) 	[米勒钳](https://baijiahao.baidu.com/s?id=1685736430700256908&wfr=spider&for=pc) 	[三口米勒钳](http://www.ss-ch.com/info-499.html)	[好：米勒钳三步获得最干净裸纤](https://baijiahao.baidu.com/s?id=1686831517649101766&wfr=spider&for=pc)	[光纤热剥器](https://detail.tmall.com/item.htm?id=842704700513&ns=1&pisk=fSYxLuA4_YDmbNF82lilIzG7vwGoKFdqnKRQSOX0fLpJ1T4igZmNWdBJQtjclt4OWCpwIddZg166CdBMm00HgI7N5vYt-2A4TELumKC157G196Wsk4moGI7N5vVu5D0pgp1X87Cf1_GRs1CbhdsfPT1CF1611d65V613hN915bB59se_5r_1Fa1dFRa1frO5N611Cosfhbd5U1MwXAB7GO49jIg3PqikFPa6lNSApgZgWPp1GiE2NTdkZUCAD9IoKerMlLA6oESrpJ_wZHp9fKDz5txpNZ6kcYaFFHWfoE7a1oskrCTGPQDbktKW3dsJ0xUchGLDXixEpkWGf1IC5gF_5QdcHd1RR-UdqUA6SaOohrBvVK81oeG3b_S6qESeoYaARHRcoh9mUP6DvQ_R4jLHJPvLK_78cbh8blSfaZAKkwqBXwgPw9cxWlrN4b5RKbh8blSfa_BnMXEabglP.&priceTId=213e36d317317735800855192e966f&skuId=5783607231101&utparam=%7B%22aplus_abtest%22%3A%2283d56225f1ab3850a06ffde345e6f9b7%22%7D&xxc=ad_ztc)	[光纤热剥钳和米勒钳的区别](https://b2b.baidu.com/q/aland?q=702B0602010179370E6673040A1E091C0E667C0D0E317839&id=qid822ce943fdd930d827537ffe2150c075&answer=16245650284446440998&utype=2)    [奢锐s9](https://www.bilibili.com/video/BV1Yb4y1N7S2/?vd_source=7346303e5e18677d7261c2c0c109ecfd)		 [藤宁赛迦钳SK3-2代](https://item.taobao.com/item.htm?abbucket=19&id=849455882725&ns=1&pisk=f3ZrLJZblgIrXnIBAYoe0UjmHOo-_0f14kGIKJ2nFbcoNJDnYSVCebwhwWrEiJU5e21JLLE4_Ht5waeHYDih11s1f8H-vDf_6yepxQH-ELjIEUmcNKmFc1s1f8QoeDwc1utHWgksCHmnr4mDnjHEEXYutqxmpjxoK3DHitlxKDxoKUvmnADHqYD3tKDmFAYkrHxnoIDEQDc3tDDdY82H0AglBo7I7T5WQxlgEbvWLoxx-UeZgHxU0hGSsGG2xHqqE-CvHTxNRf4tNVg4iitrY-DU9VEC63ho7oUESl1eD-0tN0ZobwdisrF4B2qcsHkY3-4I8o1N0qZ0erg4ksI__0PESu02K9e43rm48D7psf4YgR33m1xEHrP80mZldan75RZKSujy6jgtLW3TA1K-Z2jyQBHDmOqLvMLErxHq1tWVr1ccKxalT28pJqmt3f6SFeLKrxHq1tW2Je3mpxl1FY1..&priceTId=2147819017317741333875379e142c&xxc=taobaoSearch)	[藤宁·赛迦钳（SKIII-II）SK3](https://www.douyin.com/note/7316358402878295332)	[SK3-2简称SK3二代 ](https://www.douyin.com/video/7316352179214765351)	[光纤成端机研磨机](https://item.taobao.com/item.htm?id=682361784151&ns=1&pisk=fhrsLggGoCA_DwQNPKBEOxnnl6njlSsy1KMYE-KwHcntMywuGfWcSczIGWFI6hWGSqhbsc307jlZGmw0N95P4gygImmRa_SPIwfP70x9Xnd2JXHZS6WeTgygImv6MTzd4I9pNRT9kjFxvDHqEmHtDAdddxMSMmhtkBLKeXnxMS3vJBHrHIptDnHddYMtHhHxWBpKExTtBSnAdJHp_LMf5f21LLWota-BU-cBD3woFVLgpE-J2yDt5F2tOvkUAAgsN25zqErTT-Eaj2fWwm2UPSaY_6xx_zwKXXzO93cLrfnajmvvW2rUHooLL1Ks1yFgM2aG1hltllzj7zfWrjuxh4nxRKKYdRl_MviJ13gUY-EqvJ59ffaLsona2T8mKqUUj4qN9hi8rRoak55HDfz7pDszC3l7ve8XofKjdbWCdEYmtWn119-vKm0tKAgFd9OToVHndbWCdEYmWvDs_96B6rf..&priceTId=214780e817317822522882698e1fff&skuId=4887855089934&xxc=ad_ztc)	  [KS-K2光纤凯夫拉剪刀](https://www.tawaatool.com/products/opticalfiber/kevlar_shears.html)	[凯夫拉剪刀](https://item.taobao.com/item.htm?abbucket=19&id=616480737082&ns=1&pisk=flBmLiX5wsRbDnhkq7Jb_n3hJpV-Nm96GNH9WdLaaU8SHC8TGNAGWaONHKIArF7dShBABOfSIMs1Ho9TcKsXCdzLJJUdci9_dzxD_tcyUhsr7hkqoiJj0dzLJJh-4IavQZnNIVkraHTy0nRqQuvyXhg2QC-V4uxwXqlZ3Nrl4Ute7h8ZQUSyDhuwQhRqa3-Xbqkq3doyaUtwQFkpYA8hQT6zkFZz_ufKZC-DiFX9HAYVBvpk8iYrQ3_Jm2TF0UDZIEZTwljlDrDC2KsP-HQYUxbh2MBXNO43nI6PxTOcCcc52BTDUE1YoYtckGXHatrtvEW5b9OkK5gpPOsP9B9Euj-HnEAF3anaYKRwbK8fMrDWmZIGKQW4XXK5_a6MHpyIuFCRxOxGCPwl-gIdhQ6g-8SriblEozD6J8js1fO2V3YLHj2C7I6MSWEuqXNXg3tYJuqo1fO2V3YLqucIPI-WDyC..&priceTId=2147bf2b17318564175438214e4eac&skuId=4349432641773&xxc=taobaoSearch) 	

[凯夫拉防弹纤维](https://www.163.com/dy/article/ECGEF18K0511AJLQ.html)	 

光纤熔接： 光纤、皮线、跳线 [好：熔接](https://www.bilibili.com/video/BV1c3411C7Q8/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	 [好：光纤熔接技巧](https://www.bilibili.com/video/BV181421r7np/?vd_source=7346303e5e18677d7261c2c0c109ecfd)   [光纤连接技术](https://www.bilibili.com/video/BV1bx4y1k7EJ/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	 [光纤熔接](https://www.bilibili.com/video/BV1Uj411y7eu/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	  [熔接机](https://www.bilibili.com/video/BV1c3411C7Q8/?vd_source=7346303e5e18677d7261c2c0c109ecfd) 	[皮线光纤熔接](https://www.bilibili.com/video/BV1oNGXeYEgX/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	 [光纤熔接](https://www.bilibili.com/video/BV1Zu41137Hk/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	[光猫冷接改热熔](https://haokan.baidu.com/v?pd=wisenatural&vid=17171749937815384405) 	

- 光纤与光纤、皮线与皮线、皮线与跳线的熔接    [好：熔接](https://www.bilibili.com/video/BV1c3411C7Q8/?vd_source=7346303e5e18677d7261c2c0c109ecfd) 	

冷接：皮线装个冷接子 剥皮->切割->装冷接子 [剥皮线](https://www.bilibili.com/video/BV17B4y1u7Nr/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	  [光纤冷接](https://www.bilibili.com/video/BV1jv411W7e2/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	[冷接](https://www.bilibili.com/video/BV1tQ4y1t7CQ?spm_id_from=333.788.recommend_more_video.-1&vd_source=7346303e5e18677d7261c2c0c109ecfd) 

光纤连接： [光电转换器，光纤收发器](https://www.bilibili.com/video/BV17S4y1F7M4/?vd_source=7346303e5e18677d7261c2c0c109ecfd) 	[光纤收发器常见2种监控网络应用方案](https://www.bilibili.com/video/BV1BY4y1W7Lz?spm_id_from=333.788.recommend_more_video.2&vd_source=7346303e5e18677d7261c2c0c109ecfd) 		

盘纤:  [盘纤](https://www.bilibili.com/video/BV16q4y1679H?spm_id_from=333.788.recommend_more_video.-1&vd_source=7346303e5e18677d7261c2c0c109ecfd)	[光纤熔接之(盘纤)](https://www.bilibili.com/video/BV16g4y1V7H9/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	 

==光功率计==： 归0，改波长  [用光源和光功率计测量光纤损耗](https://www.bilibili.com/video/BV1e341167SS/?vd_source=7346303e5e18677d7261c2c0c109ecfd)  [如何测试光纤的光衰值](https://www.bilibili.com/video/BV1wX4y1i7uB?spm_id_from=333.788.recommend_more_video.-1&vd_source=7346303e5e18677d7261c2c0c109ecfd)		 [光时域反射仪](https://baike.baidu.com/item/%E5%85%89%E6%97%B6%E5%9F%9F%E5%8F%8D%E5%B0%84%E4%BB%AA/2129980?fr=ge_ala) 

[用OTDR测试光纤长度和故障点](https://www.bilibili.com/video/BV1Ka411S7i4/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	 [石文静：用OTDR测光纤长度和故障点](https://www.bilibili.com/video/BV1wb4y1C7H3/?vd_source=7346303e5e18677d7261c2c0c109ecfd) 	

[dBm, mW,dB之间的关系](https://blog.csdn.net/m0_62027863/article/details/141691460)	 

[log，lg，ln ](https://zhuanlan.zhihu.com/p/320598114)	 [log和lg的区别](https://baijiahao.baidu.com/s?id=1726422923911837275&wfr=spider&for=pc)	[计算对数](https://blog.csdn.net/qq_43620191/article/details/119515948)	 `10*lg2 = 10lg2 = 10×0.301 = 3.01（约等于3）`	

[无线电电压功率指数换算](https://wenku.baidu.com/view/6da55ba01ae8b8f67c1cfad6195f312b3169eb3e.html?_wkts_=1731924338990)	  [分贝（计量单位）](https://baike.baidu.com/item/%E5%88%86%E8%B4%9D/553473?fr=ge_ala)	 [dB，dBi, dBd, dBc，dBm，dBw的区别](https://blog.csdn.net/starstar1992/article/details/46676233)	[dB、dBm、dBi、dBd、dBc和射频中的一些常用名词术语](https://www.bilibili.com/opus/891532161534918787) [光功率db_百度搜索](https://www.baidu.com/s?ie=utf-8&f=8&rsv_bp=1&tn=baidu&wd=%E5%85%89%E5%8A%9F%E7%8E%87db&oq=db&rqlang=cn&rsv_enter=1&rsv_dl=tb&rsv_sug3=13&rsv_sug1=4&rsv_sug7=100&rsv_sug2=0&rsv_btype=t&inputT=10427&rsv_sug4=12484)		

光纤布线方案： [小区监控光纤布线方案](https://www.bilibili.com/video/BV1Kp42197LP/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	 [组全光网首先要了解pon是什么](https://www.bilibili.com/video/BV1ro4y1j7CX/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	

准备：冷接头、高精度光功率计+转接头、升级切割刀、30km红光笔、Fujikura FSM-27S光纤熔接机、皮线剥线钳

- 熔接： 2根光纤接在一起
- 工具：
  - 米勒钳： 剥离光纤==外护套 和 凃覆层==， 可以剥离尾纤外的塑料外层，同时也可以剥离光纤线芯的凃覆层；  
    - 大孔可剥离==2mm—3mm==光纤外层保护层
    - 中孔可剥离==250um—900um==光纤芯白色软胶保护层
    - 小孔可剥离==125um—250um==光纤芯的覆层，露出裸纤

  - 切割刀： 把裸纤切出想要的长度，然后进行熔接 或 接入光钎冷接头
- 光纤接口：SC、LC、FC
  - SC：方口，单模光纤跳线，方形接头或==大方口==，用于光纤到户，光猫、光纤收发器
  - LC：方口，小型化的方形接头，==小方口==，用于空间有限的高密度网络环境，光口交换机
  - FC：圆形螺纹，使用螺纹旋转方式锁定
  - ST：圆形卡口
- 光纤配线架、光纤跳线、光纤耦合器(光纤法兰，连接光纤用)、收发器及光纤色谱顺序、光缆终端盒
  - 光纤跳线: 又称光纤连接器, 是指光缆==两端都装上连接器插头==，用来实现光路活动连接。在多模光纤中，芯的直径是50μm或62.5μm，大致与人的头发的粗细相当。而单模光纤芯的直径为9μm。
  - 尾纤

| ![皮线剥线钳](./硬件知识.assets/guang-1739630548899-158.jpg) | ![跳线与尾纤](./硬件知识.assets/Snipaste_2024-11-17_23-08-44-1739630548899-159.jpg) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| ![](./硬件知识.assets/Snipaste_2024-11-17_23-22-35-1739630548899-160.jpg) | ![](./硬件知识.assets/Snipaste_2024-11-17_23-47-44-1739630548899-161.jpg) |
| ![](./硬件知识.assets/Snipaste_2024-11-18_00-21-26-1739630548899-162.jpg) |                                                              |

## PON技术

视频： [epon和 gpon区别](https://www.bilibili.com/video/BV17h411M7j8/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	

**PON技术**：APON、E/GPON、

- 千兆：EPON带宽1.25 Gbps  ==万兆==：XGPON 10Gbps的带宽，是GPON的10倍 ， XGS-PON

[xgpon_百度搜索](https://www.baidu.com/s?ie=UTF-8&wd=xgpon)	[GPON与XGPON优势和劣势](https://blog.csdn.net/z306417888/article/details/129352140) [GPON/ EPON/ XGPON /10G EPON ](https://www.jianshu.com/p/ab7b460f112c)	 [GPON、XG-PON和XGS-PON的区别](https://blog.csdn.net/ktd007/article/details/143188966) [PON：EPON/GPON/10G PON/XG-PON/NG-PON2](https://blog.csdn.net/vecloud/article/details/109603053?spm=1001.2101.3001.6650.1&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7EPaidSort-1-109603053-blog-143188966.235%5Ev43%5Epc_blog_bottom_relevance_base1)  	[PON_百度搜索](https://www.baidu.com/s?ie=UTF-8&wd=PON)	[以太网无源光网络_百度百科](https://baike.baidu.com/item/%E4%BB%A5%E5%A4%AA%E7%BD%91%E6%97%A0%E6%BA%90%E5%85%89%E7%BD%91%E7%BB%9C/5931474?fromtitle=PON&fromid=716589&fr=aladdin)  [无源光网络_百度百科](https://baike.baidu.com/item/%E6%97%A0%E6%BA%90%E5%85%89%E7%BD%91%E7%BB%9C/5210743?fr=ge_ala)		[纯介质网络_百度搜索](https://www.baidu.com/s?ie=UTF-8&wd=%E7%BA%AF%E4%BB%8B%E8%B4%A8%E7%BD%91%E7%BB%9C)	

[PON技术](https://www.bilibili.com/video/BV1Eg4y1T7Fy/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	[PON无源光网络中，ONU、ONT、SFU、HGU、SBU、MDU、MTU](https://www.bilibili.com/video/BV1Th4y1C7d9/?vd_source=7346303e5e18677d7261c2c0c109ecfd)  	

[光猫换成XGPON](https://post.smzdm.com/p/a6036m2z/)	 [EPON、GPON、10G PON、XGS-PON、NG-PON2到底是什么关系](https://www.bilibili.com/video/BV1Pj411m7H7?spm_id_from=333.788.recommend_more_video.2&vd_source=7346303e5e18677d7261c2c0c109ecfd)	[GPON与EPON的关联与区别](https://www.bilibili.com/video/BV1Ku411P7Lt/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	[想要了解全光网，首先要了解pon是什么](https://www.bilibili.com/video/BV1ro4y1j7CX/?vd_source=7346303e5e18677d7261c2c0c109ecfd) 	

[FTTH光纤入户_百度搜索](https://www.baidu.com/s?ie=UTF-8&wd=FTTH)	[什么是FTTB、FTTH、FTTR](https://www.163.com/dy/article/IP28S8ND0538056H.html)   [FTTR是什么](https://cloud.tencent.com/developer/news/1414671)	 [FTTR](https://cloud.tencent.com/developer/news/985134)		[移动FTTR](https://www.ha.10086.cn/shop/bandZone/fttrDetail)	[光纤宽带](https://www.kepuchina.cn/article/articleinfo?business_type=100&ar_id=361872)	

WDM-PON: [WDM-PON_百度搜索](https://www.baidu.com/s?ie=UTF-8&wd=WDM-PON) [物联网主干组网之全IP光网络](https://blog.csdn.net/py8105/article/details/117592181)		  

- 有源器件： 需电源来实现其特定功能的*电子*元件 [有源电子设备_百度搜索](https://www.baidu.com/s?ie=UTF-8&wd=%E6%9C%89%E6%BA%90%E7%94%B5%E5%AD%90%E8%AE%BE%E5%A4%87)	[有源器件](https://baike.baidu.com/item/%E6%9C%89%E6%BA%90%E5%99%A8%E4%BB%B6/3748667?fr=ge_ala)	[有源VS无源](https://mbd.baidu.com/newspage/data/dtlandingsuper?nid=dt_4562477200356490097)	[常见的有源电子器件和无源电子器件汇总](https://zhuanlan.zhihu.com/p/685168648)   [时分多址_百度搜索](https://www.baidu.com/s?ie=UTF-8&wd=%E6%97%B6%E5%88%86%E5%A4%9A%E5%9D%80)		
- 无源光网络是一种点对多点的光纤传输和接入技术，下行采用广播方式、上行采用时分多址方式，可以灵活地组成树形、星型、总线型等拓扑结构，在光分支点只需要安装一个简单的光分支器即可
- 无源光网络包括`ATM-PON 和 Ethernet-PON`两种 （基于ATM的[无源光网络](https://baike.baidu.com/item/无源光网络/0?fromModule=lemma_inlink)APON及基于[IP](https://baike.baidu.com/item/IP/224599?fromModule=lemma_inlink)的无源光网络E/GPON）

装修星空顶制作： [星空顶安装流程](https://www.bilibili.com/video/BV1Ma411E7L3/?vd_source=7346303e5e18677d7261c2c0c109ecfd)	 [影院星空顶](https://www.bilibili.com/video/BV1iM4y1B7Vy?spm_id_from=333.788.recommend_more_video.1&vd_source=7346303e5e18677d7261c2c0c109ecfd)	
